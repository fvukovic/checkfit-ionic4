{"version":3,"sources":["./src/app/pages/driver-homepage/driver-homepage.page.html","./src/app/pages/driver-homepage/driver-homepage-routing.module.ts","./src/app/pages/driver-homepage/driver-homepage.module.ts","./src/app/pages/driver-homepage/driver-homepage.page.scss","./src/app/pages/driver-homepage/driver-homepage.page.ts"],"names":[],"mappings":"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","file":"10-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Driver homepage</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content class=\\\"mapp\\\">\\r\\n  <style>\\r\\n    .map {\\r\\n      height: 80% !important;\\r\\n    }\\r\\n  </style>\\r\\n  <div #mapElement class=\\\"map\\\"></div> \\r\\n<ion-button *ngIf=\\\"isDriveStarted\\\" href=\\\"tel:{{phoneNumber}}\\\">>Call Customer</ion-button>\\r\\n  <ion-button *ngIf=\\\"isDriveStarted\\\" (click)=\\\"endDrive()\\\" >End Drive</ion-button>\\r\\n  <br />\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DriverHomepagePage } from './driver-homepage.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DriverHomepagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DriverHomepagePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DriverHomepagePageRoutingModule } from './driver-homepage-routing.module';\r\n\r\nimport { DriverHomepagePage } from './driver-homepage.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DriverHomepagePageRoutingModule\r\n  ],\r\n  declarations: [DriverHomepagePage]\r\n})\r\nexport class DriverHomepagePageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci1ob21lcGFnZS9kcml2ZXItaG9tZXBhZ2UucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\r\nimport { ModalController } from \"@ionic/angular\";\r\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LocationService } from \"../../services/location.service\";\r\nimport { NativeGeocoderResult } from \"@ionic-native/native-geocoder/ngx\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\n\r\ndeclare var google;\r\n@Component({\r\n  selector: \"app-driver-homepage\",\r\n  templateUrl: \"./driver-homepage.page.html\",\r\n  styleUrls: [\"./driver-homepage.page.scss\"]\r\n})\r\nexport class DriverHomepagePage implements OnInit {\r\n  map;\r\n  toAddress: String;\r\n  currentLocation: any;\r\n  fromAddress: String;\r\n  toddress: String;\r\n  isDriveStarted: boolean;\r\n  message: any;\r\n  phoneNumber: String;\r\n\r\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\r\n  constructor(\r\n    private locationService: LocationService,\r\n    private route: ActivatedRoute,\r\n    private socketService: SocketService\r\n  ) {\r\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\r\n    let message = JSON.parse(firstParam);\r\n    this.message = message;\r\n    this.phoneNumber = message.phoneNumber;\r\n    alert(this.phoneNumber)\r\n    const driveIsStarted: string = this.route.snapshot.queryParamMap.get(\r\n      \"driveIsStarted\"\r\n    );\r\n\r\n    if (driveIsStarted == \"true\") {\r\n      //TODO makni ovo na kraju\r\n      //this.populateAddress(message)\r\n      this.isDriveStarted = true;\r\n    }\r\n\r\n    this.initializeMap();\r\n  }\r\n\r\n  async populateAddress(message) {\r\n    var fromAddress = await this.locationService.getReverseGeocode(\r\n      message.fromLat,\r\n      message.fromLong\r\n    );\r\n    this.fromAddress =\r\n      fromAddress[0].thoroughfare +\r\n      \",\" +\r\n      fromAddress[0].subThoroughfare +\r\n      \",\" +\r\n      fromAddress[0].locality;\r\n    var toAddress = await this.locationService.getReverseGeocode(\r\n      message.fromLat,\r\n      message.fromLong\r\n    );\r\n    this.toAddress =\r\n      toAddress[0].thoroughfare +\r\n      \",\" +\r\n      toAddress[0].subThoroughfare +\r\n      \",\" +\r\n      toAddress[0].locality;\r\n  }\r\n\r\n  async initializeMap() {\r\n    this.currentLocation = await this.locationService.getUserPosition();\r\n    var directionsDisplay = new google.maps.DirectionsRenderer();\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n      center: {\r\n        lat: this.currentLocation.coords.latitude,\r\n        lng: this.currentLocation.coords.longitude\r\n      },\r\n      zoom: 16\r\n    });\r\n    var directionsService = new google.maps.DirectionsService();\r\n    directionsDisplay.setMap(this.map);\r\n    var directionsDisplay = new google.maps.DirectionsRenderer();\r\n    this.displayDirection(directionsService, directionsDisplay);\r\n  }\r\n\r\n  endDrive() {\r\n    this.socketService.send(\"/server-receiver\", {\r\n      type: \"customer\",\r\n      messageType: \"FINISH_DRIVE\",\r\n      customer: this.message.driver\r\n    });\r\n  }\r\n\r\n  displayDirection(directionsService, directionsDisplay) {\r\n    directionsService.route(\r\n      {\r\n        origin: new google.maps.LatLng(41.850033, -87.6500523),\r\n        destination: new google.maps.LatLng(41.850033, -87.6500523),\r\n        travelMode: \"DRIVING\"\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          directionsDisplay.setDirections(response);\r\n        }\r\n      }\r\n    );\r\n  }\r\n  ngOnInit() {}\r\n}\r\n"],"sourceRoot":"webpack:///"}