{"version":3,"sources":["src/app/pages/driver-homepage/driver-homepage.page.html","src/app/pages/driver-homepage/driver-homepage-routing.module.ts","src/app/pages/driver-homepage/driver-homepage.module.ts","src/app/pages/driver-homepage/driver-homepage.page.scss","src/app/pages/driver-homepage/driver-homepage.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Driver homepage</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content class=\\\"mapp\\\">\\r\\n  <style>\\r\\n    .map {\\r\\n      height: 80% !important;\\r\\n    }\\r\\n  </style>\\r\\n  <div #mapElement class=\\\"map\\\"></div> \\r\\n<ion-button *ngIf=\\\"isDriveStarted\\\" href=\\\"tel:{{phoneNumber}}\\\">>Call Customer</ion-button>\\r\\n  <ion-button *ngIf=\\\"isDriveStarted\\\" (click)=\\\"endDrive()\\\" >End Drive</ion-button>\\r\\n  <br />\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DriverHomepagePage } from './driver-homepage.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DriverHomepagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DriverHomepagePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DriverHomepagePageRoutingModule } from './driver-homepage-routing.module';\r\n\r\nimport { DriverHomepagePage } from './driver-homepage.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DriverHomepagePageRoutingModule\r\n  ],\r\n  declarations: [DriverHomepagePage]\r\n})\r\nexport class DriverHomepagePageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci1ob21lcGFnZS9kcml2ZXItaG9tZXBhZ2UucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\r\nimport { ModalController } from \"@ionic/angular\";\r\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LocationService } from \"../../services/location.service\";\r\nimport { NativeGeocoderResult } from \"@ionic-native/native-geocoder/ngx\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\n\r\ndeclare var google;\r\n@Component({\r\n  selector: \"app-driver-homepage\",\r\n  templateUrl: \"./driver-homepage.page.html\",\r\n  styleUrls: [\"./driver-homepage.page.scss\"]\r\n})\r\nexport class DriverHomepagePage implements OnInit {\r\n  map;\r\n  toAddress: String;\r\n  currentLocation: any;\r\n  fromAddress: String;\r\n  toddress: String;\r\n  isDriveStarted: boolean;\r\n  message: any;\r\n  phoneNumber: String;\r\n\r\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\r\n  constructor(\r\n    private locationService: LocationService,\r\n    private route: ActivatedRoute,\r\n    private socketService: SocketService\r\n  ) {\r\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\r\n    let message = JSON.parse(firstParam);\r\n    this.message = message;\r\n    this.phoneNumber = message.phoneNumber;\r\n    alert(this.phoneNumber)\r\n    const driveIsStarted: string = this.route.snapshot.queryParamMap.get(\r\n      \"driveIsStarted\"\r\n    );\r\n\r\n    if (driveIsStarted == \"true\") {\r\n      //TODO makni ovo na kraju\r\n      //this.populateAddress(message)\r\n      this.isDriveStarted = true;\r\n    }\r\n\r\n    this.initializeMap();\r\n  }\r\n\r\n  async populateAddress(message) {\r\n    var fromAddress = await this.locationService.getReverseGeocode(\r\n      message.fromLat,\r\n      message.fromLong\r\n    );\r\n    this.fromAddress =\r\n      fromAddress[0].thoroughfare +\r\n      \",\" +\r\n      fromAddress[0].subThoroughfare +\r\n      \",\" +\r\n      fromAddress[0].locality;\r\n    var toAddress = await this.locationService.getReverseGeocode(\r\n      message.fromLat,\r\n      message.fromLong\r\n    );\r\n    this.toAddress =\r\n      toAddress[0].thoroughfare +\r\n      \",\" +\r\n      toAddress[0].subThoroughfare +\r\n      \",\" +\r\n      toAddress[0].locality;\r\n  }\r\n\r\n  async initializeMap() {\r\n    this.currentLocation = await this.locationService.getUserPosition();\r\n    var directionsDisplay = new google.maps.DirectionsRenderer();\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n      center: {\r\n        lat: this.currentLocation.coords.latitude,\r\n        lng: this.currentLocation.coords.longitude\r\n      },\r\n      zoom: 16\r\n    });\r\n    var directionsService = new google.maps.DirectionsService();\r\n    directionsDisplay.setMap(this.map);\r\n    var directionsDisplay = new google.maps.DirectionsRenderer();\r\n    this.displayDirection(directionsService, directionsDisplay);\r\n  }\r\n\r\n  endDrive() {\r\n    this.socketService.send(\"/server-receiver\", {\r\n      type: \"customer\",\r\n      messageType: \"FINISH_DRIVE\",\r\n      customer: this.message.driver\r\n    });\r\n  }\r\n\r\n  displayDirection(directionsService, directionsDisplay) {\r\n    directionsService.route(\r\n      {\r\n        origin: new google.maps.LatLng(41.850033, -87.6500523),\r\n        destination: new google.maps.LatLng(41.850033, -87.6500523),\r\n        travelMode: \"DRIVING\"\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          directionsDisplay.setDirections(response);\r\n        }\r\n      }\r\n    );\r\n  }\r\n  ngOnInit() {}\r\n}\r\n"],"sourceRoot":"webpack:///","file":"10-es5.js"}