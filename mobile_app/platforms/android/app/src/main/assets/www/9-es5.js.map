{"version":3,"sources":["src/app/pages/customer-homepage/customer-homepage.page.html","src/app/pages/customer-homepage/customer-homepage-routing.module.ts","src/app/pages/customer-homepage/customer-homepage.module.ts","src/app/pages/customer-homepage/customer-homepage.page.scss","src/app/pages/customer-homepage/customer-homepage.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Order taxi</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n  <ion-content class=\\\"mapp\\\"> \\r\\n    <style>\\r\\n      .map {\\r\\n        height: 80% !important;\\r\\n      } \\r\\n    </style>\\r\\n    <div #mapElement class=\\\"map\\\"></div> \\r\\n    <div class=\\\"location-from\\\">\\r\\n        <ion-card (click)=\\\"openStreetPicker('from')\\\"> {{fromAddress}} </ion-card>\\r\\n    </div>\\r\\n    <div class=\\\"location-to\\\">\\r\\n      <ion-card (click)=\\\"openStreetPicker('to')\\\"> {{toAddress}} </ion-card>\\r\\n    </div>\\r\\n\\r\\n<!-- <ion-radio-group> \\r\\n  1<ion-radio  (click)=\\\"setNumberOfPersons(1)\\\"></ion-radio>\\r\\n  2<ion-radio  (click)=\\\"setNumberOfPersons(2)\\\"></ion-radio>\\r\\n  3<ion-radio  (click)=\\\"setNumberOfPersons(3)\\\"></ion-radio>\\r\\n  4<ion-radio  (click)=\\\"setNumberOfPersons(4)\\\"></ion-radio>\\r\\n</ion-radio-group> -->\\r\\n\\r\\n<br/>\\r\\n  <ion-button (click)=\\\"orderTaxi()\\\">{{ \\\"customerHomepage.myRides\\\" | translate }}</ion-button>\\r\\n  </ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CustomerHomepagePage } from './customer-homepage.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerHomepagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CustomerHomepagePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CustomerHomepagePageRoutingModule } from './customer-homepage-routing.module';\r\n\r\nimport { CustomerHomepagePage } from './customer-homepage.page';\r\nimport {TranslateModule} from '@ngx-translate/core';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule, \r\n    CustomerHomepagePageRoutingModule,\r\n    TranslateModule\r\n  ],\r\n  declarations: [CustomerHomepagePage]\r\n})\r\nexport class CustomerHomepagePageModule {}\r\n","export default \".location-from .sc-ion-card-ios-h,\\n.location-to .sc-ion-card-ios-h {\\n  border-bottom: 1px solid #000;\\n  height: 40px;\\n  border-radius: 0;\\n  padding: 10px 20px;\\n}\\n\\n.button {\\n  width: 100%;\\n  padding: 0 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY3VzdG9tZXItaG9tZXBhZ2UvQzpcXG11cmFBcHBcXGNoZWNrZml0LWlvbmljNFxcbW9iaWxlX2FwcC9zcmNcXGFwcFxccGFnZXNcXGN1c3RvbWVyLWhvbWVwYWdlXFxjdXN0b21lci1ob21lcGFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2N1c3RvbWVyLWhvbWVwYWdlL2N1c3RvbWVyLWhvbWVwYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFSSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FEQ0E7RUFDSSxXQUFBO0VBQ0EsZUFBQTtBQ0VKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY3VzdG9tZXItaG9tZXBhZ2UvY3VzdG9tZXItaG9tZXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvY2F0aW9uLWZyb20gLnNjLWlvbi1jYXJkLWlvcy1oLFxyXG4ubG9jYXRpb24tdG8gLnNjLWlvbi1jYXJkLWlvcy1oIHtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMDtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxufVxyXG4uYnV0dG9uIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogMCAxNXB4O1xyXG59IiwiLmxvY2F0aW9uLWZyb20gLnNjLWlvbi1jYXJkLWlvcy1oLFxuLmxvY2F0aW9uLXRvIC5zYy1pb24tY2FyZC1pb3MtaCB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwO1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIHBhZGRpbmc6IDEwcHggMjBweDtcbn1cblxuLmJ1dHRvbiB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAwIDE1cHg7XG59Il19 */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\r\nimport { ModalController, Platform } from \"@ionic/angular\";\r\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LocationService } from \"../../services/location.service\";\r\nimport { AndroidPermissions } from \"@ionic-native/android-permissions/ngx\";\r\nimport {\r\n  Geolocation,\r\n  GeolocationOptions,\r\n  Geoposition,\r\n  PositionError\r\n} from \"@ionic-native/geolocation/ngx\";\r\n\r\ndeclare var google;\r\n@Component({\r\n  selector: \"app-customer-homepage\",\r\n  templateUrl: \"./customer-homepage.page.html\",\r\n  styleUrls: [\"./customer-homepage.page.scss\"]\r\n})\r\nexport class CustomerHomepagePage implements OnInit, AfterContentInit {\r\n  map;\r\n  fromAddress: String;\r\n  toAddress: String;\r\n  currentLocation: any;\r\n  numberOfPersons: String;\r\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\r\n\r\n  constructor(\r\n    private modalcontroller: ModalController,\r\n    private router: Router,\r\n    private locationService: LocationService,\r\n    private androidPermissions: AndroidPermissions,\r\n    private platform: Platform,\r\n    private geolocation: Geolocation\r\n  ) {\r\n    this.fromAddress = \"Unesite adresu polaska!\";\r\n    this.toAddress = \"Unesite adresu odredišta!\";\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ngAfterContentInit(): void {\r\n    this.platform.ready().then(() => {\r\n      let perms = [\r\n        \"android.permission.ACCESS_COARSE_LOCATION\",\r\n        \"android.permission.ACCESS_FINE_LOCATION\",\r\n        \"android.permission.ACCESS_BACKGROUND_LOCATION\"\r\n      ];\r\n\r\n      this.androidPermissions\r\n        .checkPermission(\r\n          this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION\r\n        )\r\n        .then(result => {\r\n          if (result.hasPermission == false) {\r\n            location.reload();\r\n          }\r\n          navigator.geolocation.getCurrentPosition(resp => {\r\n            this.initializeMap();\r\n          });\r\n        });\r\n    });\r\n  }\r\n\r\n  async initializeMap() {\r\n    this.currentLocation = await this.locationService.getUserPosition();\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n      center: {\r\n        lat: this.currentLocation.coords.latitude,\r\n        lng: this.currentLocation.coords.longitude\r\n      },\r\n      zoom: 16\r\n    });\r\n    var streetLocation = await this.locationService.getReverseGeocode(\r\n      this.currentLocation.coords.latitude,\r\n      this.currentLocation.coords.longitude\r\n    );\r\n    this.fromAddress =\r\n      streetLocation[0].thoroughfare +\r\n      \",\" +\r\n      streetLocation[0].subThoroughfare +\r\n      \",\" +\r\n      streetLocation[0].locality;\r\n    this.toAddress =\r\n      streetLocation[0].thoroughfare +\r\n      \",\" +\r\n      streetLocation[0].subThoroughfare +\r\n      \",\" +\r\n      streetLocation[0].locality;\r\n\r\n    console.log(this.fromAddress);\r\n    this.addMarker(this.map);\r\n  }\r\n\r\n  addMarker(map: any) {\r\n    let marker = new google.maps.Marker({\r\n      map: map,\r\n      animation: google.maps.Animation.DROP,\r\n      position: map.getCenter()\r\n    });\r\n  }\r\n\r\n  async openStreetPicker(picker) {\r\n    const modal = await this.modalcontroller.create({\r\n      component: StreetPickerPage,\r\n      componentProps: {\r\n        picker: picker\r\n      }\r\n    });\r\n\r\n    modal.onDidDismiss().then(response => {\r\n      const data = response[\"data\"];\r\n      if (data[\"address\"] == null) {\r\n        return;\r\n      }\r\n      if (data[\"picker\"] == \"from\") {\r\n        this.fromAddress = data[\"address\"];\r\n      } else {\r\n        this.toAddress = data[\"address\"];\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n\r\n  setNumberOfPersons(numberOfPersons) {\r\n    this.numberOfPersons = numberOfPersons;\r\n  }\r\n\r\n  async orderTaxi() {\r\n    let fromAddress = await this.locationService.getForwardGeocode2(\r\n      this.fromAddress + \", Varaždin, Croatia\"\r\n    );\r\n    let toAddress = await this.locationService.getForwardGeocode2(\r\n      this.toAddress + \", Varaždin, Croatia\"\r\n    );\r\n    let params = {\r\n      fromLat: fromAddress[\"latitude\"],\r\n      fromLong: fromAddress[\"longitude\"],\r\n      toLat: toAddress[\"latitude\"],\r\n      toLong: toAddress[\"longitude\"],\r\n      persons: this.numberOfPersons\r\n    };\r\n\r\n    //   let params = {\r\n    //   fromLat: \"46.13123\",\r\n    //   fromLong: \"16.123144\",\r\n    //   toLat: \"46.13123\",\r\n    //   toLong: \"16.123144\",\r\n    // };\r\n    this.router.navigate([\"/search-ride\"], {\r\n      queryParams: { data: JSON.stringify(params) }\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"9-es5.js"}