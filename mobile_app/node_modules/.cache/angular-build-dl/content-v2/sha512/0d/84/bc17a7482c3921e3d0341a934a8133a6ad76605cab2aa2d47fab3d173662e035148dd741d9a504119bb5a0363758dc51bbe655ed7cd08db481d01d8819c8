{"version":3,"sources":["./src/app/pages/driver-homepage/driver-homepage.page.html","./src/app/pages/driver-homepage/driver-homepage-routing.module.ts","./src/app/pages/driver-homepage/driver-homepage.module.ts","./src/app/pages/driver-homepage/driver-homepage.page.scss","./src/app/pages/driver-homepage/driver-homepage.page.ts"],"names":[],"mappings":"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","file":"10-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Driver homepage</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"mapp\\\">\\n  <style>\\n    .map {\\n      height: 80% !important;\\n    }\\n  </style>\\n  <div #mapElement class=\\\"map\\\"></div> \\n<ion-button *ngIf=\\\"isDriveStarted\\\" href=\\\"tel:{{phoneNumber}}\\\">>Call Customer</ion-button>\\n  <ion-button *ngIf=\\\"isDriveStarted\\\" (click)=\\\"endDrive()\\\" >End Drive</ion-button>\\n  <br />\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DriverHomepagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DriverHomepagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DriverHomepagePageRoutingModule } from './driver-homepage-routing.module';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DriverHomepagePageRoutingModule\n  ],\n  declarations: [DriverHomepagePage]\n})\nexport class DriverHomepagePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci1ob21lcGFnZS9kcml2ZXItaG9tZXBhZ2UucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\nimport { ModalController } from \"@ionic/angular\";\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\nimport { Router } from \"@angular/router\";\nimport { LocationService } from \"../../services/location.service\";\nimport { NativeGeocoderResult } from \"@ionic-native/native-geocoder/ngx\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { SocketService } from \"../../services/socket.service\";\n\ndeclare var google;\n@Component({\n  selector: \"app-driver-homepage\",\n  templateUrl: \"./driver-homepage.page.html\",\n  styleUrls: [\"./driver-homepage.page.scss\"]\n})\nexport class DriverHomepagePage implements OnInit {\n  map;\n  toAddress: String;\n  currentLocation: any;\n  fromAddress: String;\n  toddress: String;\n  isDriveStarted: boolean;\n  message: any;\n  phoneNumber: String;\n\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\n  constructor(\n    private locationService: LocationService,\n    private route: ActivatedRoute,\n    private socketService: SocketService\n  ) {\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\n    let message = JSON.parse(firstParam);\n    this.message = message;\n    this.phoneNumber = message.phoneNumber;\n    alert(this.phoneNumber)\n    const driveIsStarted: string = this.route.snapshot.queryParamMap.get(\n      \"driveIsStarted\"\n    );\n\n    if (driveIsStarted == \"true\") {\n      //TODO makni ovo na kraju\n      //this.populateAddress(message)\n      this.isDriveStarted = true;\n    }\n\n    this.initializeMap();\n  }\n\n  async populateAddress(message) {\n    var fromAddress = await this.locationService.getReverseGeocode(\n      message.fromLat,\n      message.fromLong\n    );\n    this.fromAddress =\n      fromAddress[0].thoroughfare +\n      \",\" +\n      fromAddress[0].subThoroughfare +\n      \",\" +\n      fromAddress[0].locality;\n    var toAddress = await this.locationService.getReverseGeocode(\n      message.fromLat,\n      message.fromLong\n    );\n    this.toAddress =\n      toAddress[0].thoroughfare +\n      \",\" +\n      toAddress[0].subThoroughfare +\n      \",\" +\n      toAddress[0].locality;\n  }\n\n  async initializeMap() {\n    this.currentLocation = await this.locationService.getUserPosition();\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n      center: {\n        lat: this.currentLocation.coords.latitude,\n        lng: this.currentLocation.coords.longitude\n      },\n      zoom: 16\n    });\n    var directionsService = new google.maps.DirectionsService();\n    directionsDisplay.setMap(this.map);\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.displayDirection(directionsService, directionsDisplay);\n  }\n\n  endDrive() {\n    this.socketService.send(\"/server-receiver\", {\n      type: \"customer\",\n      messageType: \"FINISH_DRIVE\",\n      customer: this.message.driver\n    });\n  }\n\n  displayDirection(directionsService, directionsDisplay) {\n    directionsService.route(\n      {\n        origin: new google.maps.LatLng(41.850033, -87.6500523),\n        destination: new google.maps.LatLng(41.850033, -87.6500523),\n        travelMode: \"DRIVING\"\n      },\n      (response, status) => {\n        if (status === \"OK\") {\n          directionsDisplay.setDirections(response);\n        }\n      }\n    );\n  }\n  ngOnInit() {}\n}\n"],"sourceRoot":"webpack:///"}