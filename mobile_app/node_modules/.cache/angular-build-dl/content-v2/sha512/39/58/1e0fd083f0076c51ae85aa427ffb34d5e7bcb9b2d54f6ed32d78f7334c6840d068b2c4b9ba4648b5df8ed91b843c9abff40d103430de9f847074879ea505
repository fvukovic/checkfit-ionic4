{"version":3,"sources":["./src/app/pages/driver-homepage/driver-homepage.page.html","./src/app/pages/driver-homepage/driver-homepage-routing.module.ts","./src/app/pages/driver-homepage/driver-homepage.module.ts","./src/app/pages/driver-homepage/driver-homepage.page.scss","./src/app/pages/driver-homepage/driver-homepage.page.ts"],"names":[],"mappings":"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","file":"10-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <div class=\\\"header-box\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button></ion-menu-button>\\n      </ion-buttons>\\n      <ion-title>Mura Taxi</ion-title>\\n      <button class=\\\"sos\\\" *ngIf=\\\"isUserLoggedIn\\\" (click)=\\\"callSOS()\\\">SOS</button>\\n  </div>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"mapp\\\">\\n  <style>\\n    .map {\\n      height: 80% !important;\\n    }\\n  </style>\\n  \\n    <div #mapElement class=\\\"map\\\"></div> \\n    <div class=\\\"buttons\\\">\\n      <ion-button class=\\\"call-customer\\\" *ngIf=\\\"isDriveStarted\\\" href=\\\"tel:{{phoneNumber}}\\\">Nazovi korisnika</ion-button>\\n      <ion-button class=\\\"finish-drive\\\" *ngIf=\\\"isDriveStarted\\\" (click)=\\\"endDrive()\\\" >Završi vožnju</ion-button>\\n    </div>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DriverHomepagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DriverHomepagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DriverHomepagePageRoutingModule } from './driver-homepage-routing.module';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DriverHomepagePageRoutingModule\n  ],\n  declarations: [DriverHomepagePage]\n})\nexport class DriverHomepagePageModule {}\n","export default \".map {\\n  margin: 20px;\\n}\\n\\n.buttons {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n  margin-top: 20px;\\n  border-bottom: 1px solid #000;\\n  padding-bottom: 15px;\\n  margin: 20px;\\n}\\n\\n.buttons .call-customer {\\n  --background: #46e169;\\n  color: #393939;\\n  font-size: 13px;\\n}\\n\\n.buttons .finish-drive {\\n  --background: #393939;\\n  color: #46e169;\\n  font-size: 13px;\\n}\\n\\n.header-box {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n  margin: 10px 0;\\n  padding: 0;\\n}\\n\\n.header-box ion-title {\\n  margin: 0;\\n  padding: 0;\\n  text-align: center;\\n}\\n\\n.header-box .sos {\\n  background: #DC143C;\\n  float: right;\\n  width: 50px;\\n  height: 50px;\\n  border-radius: 50%;\\n  padding: 0;\\n  margin: 0 20px 0 0;\\n  color: white;\\n  font-weight: bold;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9maWxpcC52dWtvdmljL0RldmVsb3BtZW50L2NoZWNrZml0LW1vYmlsZS9tb2JpbGVfYXBwL3NyYy9hcHAvcGFnZXMvZHJpdmVyLWhvbWVwYWdlL2RyaXZlci1ob21lcGFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2RyaXZlci1ob21lcGFnZS9kcml2ZXItaG9tZXBhZ2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQ0NKOztBRENBO0VBQ0ksb0JBQUE7RUFBQSxhQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtFQUNBLHlCQUFBO1VBQUEsOEJBQUE7RUFDQSxnQkFBQTtFQUNBLDZCQUFBO0VBQ0Esb0JBQUE7RUFDQSxZQUFBO0FDRUo7O0FEQUk7RUFDSSxxQkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0FDRVI7O0FEQUk7RUFDSSxxQkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0FDRVI7O0FEQ0E7RUFDSSxvQkFBQTtFQUFBLGFBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0EseUJBQUE7VUFBQSw4QkFBQTtFQUNBLGNBQUE7RUFDQSxVQUFBO0FDRUo7O0FEQUk7RUFDSSxTQUFBO0VBQ0EsVUFBQTtFQUNBLGtCQUFBO0FDRVI7O0FEQUk7RUFDSSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0FDRVIiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9kcml2ZXItaG9tZXBhZ2UvZHJpdmVyLWhvbWVwYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXAge1xuICAgIG1hcmdpbjogMjBweDtcbn1cbi5idXR0b25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7XG4gICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgbWFyZ2luOiAyMHB4O1xuXG4gICAgLmNhbGwtY3VzdG9tZXIge1xuICAgICAgICAtLWJhY2tncm91bmQ6ICM0NmUxNjk7XG4gICAgICAgIGNvbG9yOiAjMzkzOTM5O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgfVxuICAgIC5maW5pc2gtZHJpdmUge1xuICAgICAgICAtLWJhY2tncm91bmQ6ICMzOTM5Mzk7XG4gICAgICAgIGNvbG9yOiAjNDZlMTY5O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgfVxufVxuLmhlYWRlci1ib3gge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgcGFkZGluZzogMDtcblxuICAgIGlvbi10aXRsZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAuc29zIHtcbiAgICAgICAgYmFja2dyb3VuZDogI0RDMTQzQztcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICB3aWR0aDogNTBweDtcbiAgICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIG1hcmdpbjogMCAyMHB4IDAgMDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB9XG59XG5cbiIsIi5tYXAge1xuICBtYXJnaW46IDIwcHg7XG59XG5cbi5idXR0b25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBtYXJnaW4tdG9wOiAyMHB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDtcbiAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gIG1hcmdpbjogMjBweDtcbn1cbi5idXR0b25zIC5jYWxsLWN1c3RvbWVyIHtcbiAgLS1iYWNrZ3JvdW5kOiAjNDZlMTY5O1xuICBjb2xvcjogIzM5MzkzOTtcbiAgZm9udC1zaXplOiAxM3B4O1xufVxuLmJ1dHRvbnMgLmZpbmlzaC1kcml2ZSB7XG4gIC0tYmFja2dyb3VuZDogIzM5MzkzOTtcbiAgY29sb3I6ICM0NmUxNjk7XG4gIGZvbnQtc2l6ZTogMTNweDtcbn1cblxuLmhlYWRlci1ib3gge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIG1hcmdpbjogMTBweCAwO1xuICBwYWRkaW5nOiAwO1xufVxuLmhlYWRlci1ib3ggaW9uLXRpdGxlIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4uaGVhZGVyLWJveCAuc29zIHtcbiAgYmFja2dyb3VuZDogI0RDMTQzQztcbiAgZmxvYXQ6IHJpZ2h0O1xuICB3aWR0aDogNTBweDtcbiAgaGVpZ2h0OiA1MHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIHBhZGRpbmc6IDA7XG4gIG1hcmdpbjogMCAyMHB4IDAgMDtcbiAgY29sb3I6IHdoaXRlO1xuICBmb250LXdlaWdodDogYm9sZDtcbn0iXX0= */\"","import {\n  Component,\n  OnInit,\n  AfterContentInit,\n  ViewChild,\n  ElementRef\n} from \"@angular/core\";\nimport { ModalController } from \"@ionic/angular\";\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\nimport { Router } from \"@angular/router\";\nimport { LocationService } from \"../../services/location.service\";\nimport { NativeGeocoderResult } from \"@ionic-native/native-geocoder/ngx\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { SocketService } from \"../../services/socket.service\";\nimport { Storage } from \"@ionic/storage\";\n\ndeclare var google;\n@Component({\n  selector: \"app-driver-homepage\",\n  templateUrl: \"./driver-homepage.page.html\",\n  styleUrls: [\"./driver-homepage.page.scss\"]\n})\nexport class DriverHomepagePage implements OnInit {\n  map;\n  toAddress: String;\n  currentLocation: any;\n  fromAddress: String;\n  toddress: String;\n  isDriveStarted: boolean;\n  message: any;\n  phoneNumber: String;\n  isUserLoggedIn: boolean = false;\n\n  @ViewChild(\"mapElement\", { static: true }) mapElement: ElementRef;\n  directionsService = new google.maps.DirectionsService();\n  directionsDisplay = new google.maps.DirectionsRenderer();\n\n  constructor(\n    private locationService: LocationService,\n    private route: ActivatedRoute,\n    private socketService: SocketService,\n    private storage: Storage\n  ) {\n    this.storage.get(\"username\").then(val => {\n      if (val != null) {\n        this.isUserLoggedIn = true;\n      }\n    });\n    this.initializeMap();\n\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\n    if (firstParam != null) {\n      let message = JSON.parse(firstParam);\n      this.message = message;\n      this.phoneNumber = message.phoneNumber;\n      const driveIsStarted: string = this.route.snapshot.queryParamMap.get(\n        \"driveIsStarted\"\n      );\n\n      if (driveIsStarted == \"true\") {\n        //TODO makni ovo na kraju\n        this.isDriveStarted = true;\n      }\n\n      this.directionsDisplay.setMap(this.map);\n      //this.calculateAndDisplayRoute()\n      this.populateAddress(this.message);\n    }\n  }\n  ngAfterContentInit() {}\n\n  calculateAndDisplayRoute() {\n    const that = this;\n    this.directionsService.route(\n      {\n        origin: this.fromAddress,\n        destination: this.toAddress,\n        travelMode: \"DRIVING\"\n      },\n      (response, status) => {\n        if (status === \"OK\") {\n          that.directionsDisplay.setDirections(response);\n        } else {\n          window.alert(\"Directions request failed due to \" + status);\n        }\n      }\n    );\n  }\n\n  async populateAddress(message) {\n    var fromAddress = await this.locationService.getReverseGeocode(\n      message.fromLat,\n      message.fromLong\n    );\n    this.fromAddress =\n      fromAddress[0].thoroughfare +\n      \",\" +\n      fromAddress[0].subThoroughfare +\n      \",\" +\n      fromAddress[0].locality;\n\n    var toAddress = await this.locationService.getReverseGeocode(\n      message.toLat,\n      message.toLong\n    );\n    this.toAddress =\n      toAddress[0].thoroughfare +\n      \",\" +\n      toAddress[0].subThoroughfare +\n      \",\" +\n      toAddress[0].locality;\n    this.calculateAndDisplayRoute();\n  }\n\n  async initializeMap() {\n    this.currentLocation = await this.locationService.getUserPosition();\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n      zoom: 7,\n      center: {\n        lat: this.currentLocation.coords.latitude,\n        lng: this.currentLocation.coords.longitude\n      }\n    });\n    this.directionsDisplay.setMap(this.map);\n    var directionsService = new google.maps.DirectionsService();\n    directionsDisplay.setMap(this.map);\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.displayDirection(directionsService, directionsDisplay);\n  }\n\n  endDrive() {\n    this.storage.get(\"username\").then(username => {\n      this.socketService.send(\"/server-receiver\", {\n        type: \"customer\",\n        messageType: \"FINISH_DRIVE\",\n        driver: username\n      });\n    });\n    location.reload();\n  }\n\n  displayDirection(directionsService, directionsDisplay) {\n    directionsService.route(\n      {\n        origin: new google.maps.LatLng(\n          this.currentLocation.coords.latitude,\n          this.currentLocation.coords.longitude\n        ),\n        destination: this.toAddress,\n        travelMode: \"DRIVING\"\n      },\n      (response, status) => {\n        if (status === \"OK\") {\n          directionsDisplay.setDirections(response);\n        }\n      }\n    );\n  }\n  ngOnInit() {}\n\n  async callSOS() {\n    this.currentLocation = await this.locationService.getUserPosition();\n    console.log(\"DSAD\");\n    this.storage.get(\"username\").then(username => {\n      this.storage.get(\"username\").then(phone => {\n        this.socketService.send(\"/server-receiver\", {\n          type: \"customer\",\n          messageType: \"SOS\",\n          driver: username,\n          phoneNumber: phone,\n          fromLat: this.currentLocation.coords.latitude,\n          fromLong: this.currentLocation.coords.longitude\n        });\n      });\n    });\n  }\n}\n"],"sourceRoot":"webpack:///"}