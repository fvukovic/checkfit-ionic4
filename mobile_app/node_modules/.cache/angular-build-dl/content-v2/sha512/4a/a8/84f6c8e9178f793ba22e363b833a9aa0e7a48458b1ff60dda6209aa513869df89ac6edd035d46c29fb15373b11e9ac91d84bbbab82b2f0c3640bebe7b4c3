{"version":3,"sources":["src/app/pages/driver-homepage/driver-homepage.page.html","src/app/pages/driver-homepage/driver-homepage-routing.module.ts","src/app/pages/driver-homepage/driver-homepage.module.ts","src/app/pages/driver-homepage/driver-homepage.page.scss","src/app/pages/driver-homepage/driver-homepage.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Driver homepage</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"mapp\\\">\\n  <style>\\n    .map {\\n      height: 80% !important;\\n    }\\n  </style>\\n  <div #mapElement class=\\\"map\\\"></div> \\n<ion-button *ngIf=\\\"isDriveStarted\\\" href=\\\"tel:{{phoneNumber}}\\\">>Call Customer</ion-button>\\n  <ion-button *ngIf=\\\"isDriveStarted\\\" (click)=\\\"endDrive()\\\" >End Drive</ion-button>\\n  <br />\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DriverHomepagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DriverHomepagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DriverHomepagePageRoutingModule } from './driver-homepage-routing.module';\n\nimport { DriverHomepagePage } from './driver-homepage.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DriverHomepagePageRoutingModule\n  ],\n  declarations: [DriverHomepagePage]\n})\nexport class DriverHomepagePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci1ob21lcGFnZS9kcml2ZXItaG9tZXBhZ2UucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\nimport { ModalController } from \"@ionic/angular\";\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\nimport { Router } from \"@angular/router\";\nimport { LocationService } from \"../../services/location.service\";\nimport { NativeGeocoderResult } from \"@ionic-native/native-geocoder/ngx\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { SocketService } from \"../../services/socket.service\";\n\ndeclare var google;\n@Component({\n  selector: \"app-driver-homepage\",\n  templateUrl: \"./driver-homepage.page.html\",\n  styleUrls: [\"./driver-homepage.page.scss\"]\n})\nexport class DriverHomepagePage implements OnInit {\n  map;\n  toAddress: String;\n  currentLocation: any;\n  fromAddress: String;\n  toddress: String;\n  isDriveStarted: boolean;\n  message: any;\n  phoneNumber: String;\n\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\n  constructor(\n    private locationService: LocationService,\n    private route: ActivatedRoute,\n    private socketService: SocketService\n  ) {\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\n    let message = JSON.parse(firstParam);\n    this.message = message;\n    this.phoneNumber = message.phoneNumber;\n    alert(this.phoneNumber)\n    const driveIsStarted: string = this.route.snapshot.queryParamMap.get(\n      \"driveIsStarted\"\n    );\n\n    if (driveIsStarted == \"true\") {\n      //TODO makni ovo na kraju\n      //this.populateAddress(message)\n      this.isDriveStarted = true;\n    }\n\n    this.initializeMap();\n  }\n\n  async populateAddress(message) {\n    var fromAddress = await this.locationService.getReverseGeocode(\n      message.fromLat,\n      message.fromLong\n    );\n    this.fromAddress =\n      fromAddress[0].thoroughfare +\n      \",\" +\n      fromAddress[0].subThoroughfare +\n      \",\" +\n      fromAddress[0].locality;\n    var toAddress = await this.locationService.getReverseGeocode(\n      message.fromLat,\n      message.fromLong\n    );\n    this.toAddress =\n      toAddress[0].thoroughfare +\n      \",\" +\n      toAddress[0].subThoroughfare +\n      \",\" +\n      toAddress[0].locality;\n  }\n\n  async initializeMap() {\n    this.currentLocation = await this.locationService.getUserPosition();\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\n      center: {\n        lat: this.currentLocation.coords.latitude,\n        lng: this.currentLocation.coords.longitude\n      },\n      zoom: 16\n    });\n    var directionsService = new google.maps.DirectionsService();\n    directionsDisplay.setMap(this.map);\n    var directionsDisplay = new google.maps.DirectionsRenderer();\n    this.displayDirection(directionsService, directionsDisplay);\n  }\n\n  endDrive() {\n    this.socketService.send(\"/server-receiver\", {\n      type: \"customer\",\n      messageType: \"FINISH_DRIVE\",\n      customer: this.message.driver\n    });\n  }\n\n  displayDirection(directionsService, directionsDisplay) {\n    directionsService.route(\n      {\n        origin: new google.maps.LatLng(41.850033, -87.6500523),\n        destination: new google.maps.LatLng(41.850033, -87.6500523),\n        travelMode: \"DRIVING\"\n      },\n      (response, status) => {\n        if (status === \"OK\") {\n          directionsDisplay.setDirections(response);\n        }\n      }\n    );\n  }\n  ngOnInit() {}\n}\n"],"sourceRoot":"webpack:///","file":"10-es5.js"}