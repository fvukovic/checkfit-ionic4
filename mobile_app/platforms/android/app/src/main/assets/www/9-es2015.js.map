{"version":3,"sources":["./src/app/pages/customer-homepage/customer-homepage.page.html","./src/app/pages/customer-homepage/customer-homepage-routing.module.ts","./src/app/pages/customer-homepage/customer-homepage.module.ts","./src/app/pages/customer-homepage/customer-homepage.page.scss","./src/app/pages/customer-homepage/customer-homepage.page.ts"],"names":[],"mappings":"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","file":"9-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Order taxi</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n  <ion-content class=\\\"mapp\\\"> \\r\\n    <style>\\r\\n      .map {\\r\\n        height: 80% !important;\\r\\n      } \\r\\n    </style>\\r\\n    <div #mapElement class=\\\"map\\\"></div> \\r\\n    <div class=\\\"location-from\\\">\\r\\n        <ion-card (click)=\\\"openStreetPicker('from')\\\"> {{fromAddress}} </ion-card>\\r\\n    </div>\\r\\n    <div class=\\\"location-to\\\">\\r\\n      <ion-card (click)=\\\"openStreetPicker('to')\\\"> {{toAddress}} </ion-card>\\r\\n    </div>\\r\\n\\r\\n<!-- <ion-radio-group> \\r\\n  1<ion-radio  (click)=\\\"setNumberOfPersons(1)\\\"></ion-radio>\\r\\n  2<ion-radio  (click)=\\\"setNumberOfPersons(2)\\\"></ion-radio>\\r\\n  3<ion-radio  (click)=\\\"setNumberOfPersons(3)\\\"></ion-radio>\\r\\n  4<ion-radio  (click)=\\\"setNumberOfPersons(4)\\\"></ion-radio>\\r\\n</ion-radio-group> -->\\r\\n\\r\\n<br/>\\r\\n  <ion-button (click)=\\\"orderTaxi()\\\">{{ \\\"customerHomepage.myRides\\\" | translate }}</ion-button>\\r\\n  </ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CustomerHomepagePage } from './customer-homepage.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CustomerHomepagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CustomerHomepagePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CustomerHomepagePageRoutingModule } from './customer-homepage-routing.module';\r\n\r\nimport { CustomerHomepagePage } from './customer-homepage.page';\r\nimport {TranslateModule} from '@ngx-translate/core';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule, \r\n    CustomerHomepagePageRoutingModule,\r\n    TranslateModule\r\n  ],\r\n  declarations: [CustomerHomepagePage]\r\n})\r\nexport class CustomerHomepagePageModule {}\r\n","export default \".location-from .sc-ion-card-ios-h,\\n.location-to .sc-ion-card-ios-h {\\n  border-bottom: 1px solid #000;\\n  height: 40px;\\n  border-radius: 0;\\n  padding: 10px 20px;\\n}\\n\\n.button {\\n  width: 100%;\\n  padding: 0 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY3VzdG9tZXItaG9tZXBhZ2UvQzpcXG11cmFBcHBcXGNoZWNrZml0LWlvbmljNFxcbW9iaWxlX2FwcC9zcmNcXGFwcFxccGFnZXNcXGN1c3RvbWVyLWhvbWVwYWdlXFxjdXN0b21lci1ob21lcGFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2N1c3RvbWVyLWhvbWVwYWdlL2N1c3RvbWVyLWhvbWVwYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFSSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FEQ0E7RUFDSSxXQUFBO0VBQ0EsZUFBQTtBQ0VKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY3VzdG9tZXItaG9tZXBhZ2UvY3VzdG9tZXItaG9tZXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvY2F0aW9uLWZyb20gLnNjLWlvbi1jYXJkLWlvcy1oLFxyXG4ubG9jYXRpb24tdG8gLnNjLWlvbi1jYXJkLWlvcy1oIHtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMDtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxufVxyXG4uYnV0dG9uIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogMCAxNXB4O1xyXG59IiwiLmxvY2F0aW9uLWZyb20gLnNjLWlvbi1jYXJkLWlvcy1oLFxuLmxvY2F0aW9uLXRvIC5zYy1pb24tY2FyZC1pb3MtaCB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwO1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIHBhZGRpbmc6IDEwcHggMjBweDtcbn1cblxuLmJ1dHRvbiB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAwIDE1cHg7XG59Il19 */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\r\nimport { ModalController, Platform } from \"@ionic/angular\";\r\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LocationService } from \"../../services/location.service\";\r\nimport { AndroidPermissions } from \"@ionic-native/android-permissions/ngx\";\r\nimport {\r\n  Geolocation,\r\n  GeolocationOptions,\r\n  Geoposition,\r\n  PositionError\r\n} from \"@ionic-native/geolocation/ngx\";\r\n\r\ndeclare var google;\r\n@Component({\r\n  selector: \"app-customer-homepage\",\r\n  templateUrl: \"./customer-homepage.page.html\",\r\n  styleUrls: [\"./customer-homepage.page.scss\"]\r\n})\r\nexport class CustomerHomepagePage implements OnInit, AfterContentInit {\r\n  map;\r\n  fromAddress: String;\r\n  toAddress: String;\r\n  currentLocation: any;\r\n  numberOfPersons: String;\r\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\r\n\r\n  constructor(\r\n    private modalcontroller: ModalController,\r\n    private router: Router,\r\n    private locationService: LocationService,\r\n    private androidPermissions: AndroidPermissions,\r\n    private platform: Platform,\r\n    private geolocation: Geolocation\r\n  ) {\r\n    this.fromAddress = \"Unesite adresu polaska!\";\r\n    this.toAddress = \"Unesite adresu odredišta!\";\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ngAfterContentInit(): void {\r\n    this.platform.ready().then(() => {\r\n      let perms = [\r\n        \"android.permission.ACCESS_COARSE_LOCATION\",\r\n        \"android.permission.ACCESS_FINE_LOCATION\",\r\n        \"android.permission.ACCESS_BACKGROUND_LOCATION\"\r\n      ];\r\n\r\n      this.androidPermissions\r\n        .checkPermission(\r\n          this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION\r\n        )\r\n        .then(result => {\r\n          if (result.hasPermission == false) {\r\n            location.reload();\r\n          }\r\n          navigator.geolocation.getCurrentPosition(resp => {\r\n            this.initializeMap();\r\n          });\r\n        });\r\n    });\r\n  }\r\n\r\n  async initializeMap() {\r\n    this.currentLocation = await this.locationService.getUserPosition();\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n      center: {\r\n        lat: this.currentLocation.coords.latitude,\r\n        lng: this.currentLocation.coords.longitude\r\n      },\r\n      zoom: 16\r\n    });\r\n    var streetLocation = await this.locationService.getReverseGeocode(\r\n      this.currentLocation.coords.latitude,\r\n      this.currentLocation.coords.longitude\r\n    );\r\n    this.fromAddress =\r\n      streetLocation[0].thoroughfare +\r\n      \",\" +\r\n      streetLocation[0].subThoroughfare +\r\n      \",\" +\r\n      streetLocation[0].locality;\r\n    this.toAddress =\r\n      streetLocation[0].thoroughfare +\r\n      \",\" +\r\n      streetLocation[0].subThoroughfare +\r\n      \",\" +\r\n      streetLocation[0].locality;\r\n\r\n    console.log(this.fromAddress);\r\n    this.addMarker(this.map);\r\n  }\r\n\r\n  addMarker(map: any) {\r\n    let marker = new google.maps.Marker({\r\n      map: map,\r\n      animation: google.maps.Animation.DROP,\r\n      position: map.getCenter()\r\n    });\r\n  }\r\n\r\n  async openStreetPicker(picker) {\r\n    const modal = await this.modalcontroller.create({\r\n      component: StreetPickerPage,\r\n      componentProps: {\r\n        picker: picker\r\n      }\r\n    });\r\n\r\n    modal.onDidDismiss().then(response => {\r\n      const data = response[\"data\"];\r\n      if (data[\"address\"] == null) {\r\n        return;\r\n      }\r\n      if (data[\"picker\"] == \"from\") {\r\n        this.fromAddress = data[\"address\"];\r\n      } else {\r\n        this.toAddress = data[\"address\"];\r\n      }\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n\r\n  setNumberOfPersons(numberOfPersons) {\r\n    this.numberOfPersons = numberOfPersons;\r\n  }\r\n\r\n  async orderTaxi() {\r\n    let fromAddress = await this.locationService.getForwardGeocode2(\r\n      this.fromAddress + \", Varaždin, Croatia\"\r\n    );\r\n    let toAddress = await this.locationService.getForwardGeocode2(\r\n      this.toAddress + \", Varaždin, Croatia\"\r\n    );\r\n    let params = {\r\n      fromLat: fromAddress[\"latitude\"],\r\n      fromLong: fromAddress[\"longitude\"],\r\n      toLat: toAddress[\"latitude\"],\r\n      toLong: toAddress[\"longitude\"],\r\n      persons: this.numberOfPersons\r\n    };\r\n\r\n    //   let params = {\r\n    //   fromLat: \"46.13123\",\r\n    //   fromLong: \"16.123144\",\r\n    //   toLat: \"46.13123\",\r\n    //   toLong: \"16.123144\",\r\n    // };\r\n    this.router.navigate([\"/search-ride\"], {\r\n      queryParams: { data: JSON.stringify(params) }\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}