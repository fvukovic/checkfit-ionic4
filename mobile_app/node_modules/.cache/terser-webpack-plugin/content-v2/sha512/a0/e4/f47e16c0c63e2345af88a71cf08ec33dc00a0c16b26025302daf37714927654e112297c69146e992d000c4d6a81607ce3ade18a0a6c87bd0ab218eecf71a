{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{\"3ud+\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MyRidesPageModuleNgFactory\",(function(){return MyRidesPageModuleNgFactory}));var core=__webpack_require__(\"8Y7J\");class MyRidesPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),core_ngfactory=__webpack_require__(\"oBZk\"),fesm5=__webpack_require__(\"ZZ/e\"),common=__webpack_require__(\"SVse\"),tslib_es6=__webpack_require__(\"mrSG\"),location_service=__webpack_require__(\"yHma\"),socket_service=__webpack_require__(\"5U9e\"),catchError=__webpack_require__(\"JIr8\"),Observable=__webpack_require__(\"HDdC\");class my_rides_page_MyRidesPage{constructor(locationService,socketService,storage,http){this.locationService=locationService,this.socketService=socketService,this.storage=storage,this.http=http,this.isUserLoggedIn=!1,this.invoiceList=[],this.storage.get(\"username\").then(val=>{null!=val&&(this.isUserLoggedIn=!0)})}ngOnInit(){this.storage.get(\"username\").then(val=>{null!=val&&this.http.post(\"https://taxi-mura.herokuapp.com/api/drivesByUsername\",{username:val}).pipe(Object(catchError.a)(err=>Observable.a.throw(err||\"Internal Server error\"))).subscribe(data=>{Object.entries(data).forEach(([key,value])=>{this.locationService.getReverseGeocode(value.fromLat,value.fromLong).then(from=>{this.locationService.getReverseGeocode(value.toLat,value.toLong).then(to=>{this.invoiceList.push({fromAddress:from[0].thoroughfare+\",\"+from[0].subThoroughfare+\",\"+from[0].locality,toAddress:to[0].thoroughfare+\",\"+to[0].subThoroughfare+\",\"+to[0].locality,persons:value.persons,km:value.km,time:value.time.replace(\"T\",\" \").replace(\"Z\",\"\")}),console.log(JSON.stringify(this.invoiceList))})})})})})}getAddressFromGeolocation(latitude,longitude){return tslib_es6.b(this,void 0,void 0,(function*(){}))}callSOS(){return tslib_es6.b(this,void 0,void 0,(function*(){let currentLocation=yield this.locationService.getUserPosition();console.log(\"DSAD\"),console.log(currentLocation),this.storage.get(\"username\").then(username=>{this.storage.get(\"username\").then(phone=>{this.socketService.send(\"/server-receiver\",{type:\"customer\",messageType:\"SOS\",driver:username,phoneNumber:phone,fromLat:currentLocation.cords.latitude,fromLong:currentLocation.cords.latitude})})})}))}}var ionic_storage=__webpack_require__(\"xgBC\"),http=__webpack_require__(\"IheW\"),RenderType_MyRidesPage=core.zb({encapsulation:0,styles:[[\".my-rides[_ngcontent-%COMP%]{margin:20px;border-bottom:2px solid #000;padding:15px 0 5px}.my-rides[_ngcontent-%COMP%]   .details-ride[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:10px}.my-rides[_ngcontent-%COMP%]   .details-ride[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;font-size:12px}.my-rides[_ngcontent-%COMP%]   .details-ride[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:right;font-size:12px}.header-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:10px}img[_ngcontent-%COMP%]{max-width:50px}ion-title[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;text-transform:uppercase;font-size:20px}ion-menu-button[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;--background:#f4f0ec;width:50px;height:50px;border-radius:50%}\"]],data:{}});function View_MyRidesPage_1(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,25,\"div\",[[\"class\",\"my-rides\"]],null,null,null,null,null)),(_l()(),core.Bb(1,0,null,null,4,\"div\",[[\"class\",\"details-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(2,0,null,null,1,\"span\",[[\"class\",\"text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Polazište:\"])),(_l()(),core.Bb(4,0,null,null,1,\"span\",[[\"class\",\"value\"]],null,null,null,null,null)),(_l()(),core.Tb(5,null,[\"\",\"\"])),(_l()(),core.Bb(6,0,null,null,4,\"div\",[[\"class\",\"details-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(7,0,null,null,1,\"span\",[[\"class\",\"text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Odredište:\"])),(_l()(),core.Bb(9,0,null,null,1,\"span\",[[\"class\",\"value\"]],null,null,null,null,null)),(_l()(),core.Tb(10,null,[\"\",\" \"])),(_l()(),core.Bb(11,0,null,null,4,\"div\",[[\"class\",\"details-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(12,0,null,null,1,\"span\",[[\"class\",\"text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Udaljenost:\"])),(_l()(),core.Bb(14,0,null,null,1,\"span\",[[\"class\",\"value\"]],null,null,null,null,null)),(_l()(),core.Tb(15,null,[\"\",\" km \"])),(_l()(),core.Bb(16,0,null,null,4,\"div\",[[\"class\",\"details-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(17,0,null,null,1,\"span\",[[\"class\",\"text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Osoba:\"])),(_l()(),core.Bb(19,0,null,null,1,\"span\",[[\"class\",\"value\"]],null,null,null,null,null)),(_l()(),core.Tb(20,null,[\"\",\" \"])),(_l()(),core.Bb(21,0,null,null,4,\"div\",[[\"class\",\"details-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(22,0,null,null,1,\"span\",[[\"class\",\"text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Datum:\"])),(_l()(),core.Bb(24,0,null,null,1,\"span\",[[\"class\",\"value\"]],null,null,null,null,null)),(_l()(),core.Tb(25,null,[\"\",\" \"]))],null,(function(_ck,_v){_ck(_v,5,0,_v.context.$implicit.fromAddress),_ck(_v,10,0,_v.context.$implicit.toAddress),_ck(_v,15,0,_v.context.$implicit.km),_ck(_v,20,0,_v.context.$implicit.persons),_ck(_v,25,0,_v.context.$implicit.time)}))}function View_MyRidesPage_0(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,12,\"ion-header\",[],null,null,null,core_ngfactory.B,core_ngfactory.f)),core.Ab(1,49152,null,0,fesm5.B,[core.j,core.p,core.F],{translucent:[0,\"translucent\"]},null),(_l()(),core.Bb(2,0,null,0,10,\"ion-toolbar\",[],null,null,null,core_ngfactory.R,core_ngfactory.v)),core.Ab(3,49152,null,0,fesm5.Cb,[core.j,core.p,core.F],null,null),(_l()(),core.Bb(4,0,null,0,8,\"div\",[[\"class\",\"header-box\"]],null,null,null,null,null)),(_l()(),core.Bb(5,0,null,null,3,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,core_ngfactory.y,core_ngfactory.c)),core.Ab(6,49152,null,0,fesm5.l,[core.j,core.p,core.F],null,null),(_l()(),core.Bb(7,0,null,0,1,\"ion-menu-button\",[],null,null,null,core_ngfactory.H,core_ngfactory.m)),core.Ab(8,49152,null,0,fesm5.R,[core.j,core.p,core.F],null,null),(_l()(),core.Bb(9,0,null,null,2,\"ion-title\",[],null,null,null,core_ngfactory.Q,core_ngfactory.u)),core.Ab(10,49152,null,0,fesm5.Ab,[core.j,core.p,core.F],null,null),(_l()(),core.Tb(-1,0,[\"Moje vožnje\"])),(_l()(),core.Bb(12,0,null,null,0,\"img\",[[\"src\",\"../../../assets/img/taxiLogo.png\"]],null,null,null,null,null)),(_l()(),core.Bb(13,0,null,null,3,\"ion-content\",[],null,null,null,core_ngfactory.A,core_ngfactory.e)),core.Ab(14,49152,null,0,fesm5.u,[core.j,core.p,core.F],null,null),(_l()(),core.qb(16777216,null,0,1,null,View_MyRidesPage_1)),core.Ab(16,278528,null,0,common.h,[core.W,core.S,core.x],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,!0),_ck(_v,16,0,_co.invoiceList)}),null)}function View_MyRidesPage_Host_0(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,1,\"app-my-rides\",[],null,null,null,View_MyRidesPage_0,RenderType_MyRidesPage)),core.Ab(1,114688,null,0,my_rides_page_MyRidesPage,[location_service.a,socket_service.a,ionic_storage.b,http.c],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var MyRidesPageNgFactory=core.xb(\"app-my-rides\",my_rides_page_MyRidesPage,View_MyRidesPage_Host_0,{},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\"),router=__webpack_require__(\"iInd\");class MyRidesPageRoutingModule{}var MyRidesPageModuleNgFactory=core.yb(MyRidesPageModule,[],(function(_l){return core.Kb([core.Lb(512,core.m,core.jb,[[8,[router_ngfactory.a,MyRidesPageNgFactory]],[3,core.m],core.D]),core.Lb(4608,common.k,common.j,[core.z,[2,common.t]]),core.Lb(4608,fesm2015_forms.l,fesm2015_forms.l,[]),core.Lb(4608,fesm5.b,fesm5.b,[core.F,core.g]),core.Lb(4608,fesm5.Gb,fesm5.Gb,[fesm5.b,core.m,core.w]),core.Lb(4608,fesm5.Kb,fesm5.Kb,[fesm5.b,core.m,core.w]),core.Lb(1073742336,common.b,common.b,[]),core.Lb(1073742336,fesm2015_forms.k,fesm2015_forms.k,[]),core.Lb(1073742336,fesm2015_forms.d,fesm2015_forms.d,[]),core.Lb(1073742336,fesm5.Eb,fesm5.Eb,[]),core.Lb(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Lb(1073742336,MyRidesPageRoutingModule,MyRidesPageRoutingModule,[]),core.Lb(1073742336,MyRidesPageModule,MyRidesPageModule,[]),core.Lb(1024,router.k,(function(){return[[{path:\"\",component:my_rides_page_MyRidesPage}]]}),[])])}))}}]);","extractedComments":[]}