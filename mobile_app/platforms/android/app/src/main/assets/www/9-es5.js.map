{"version":3,"sources":["src/app/pages/customer-homepage/customer-homepage.page.html","src/app/pages/customer-homepage/customer-homepage-routing.module.ts","src/app/pages/customer-homepage/customer-homepage.module.ts","src/app/pages/customer-homepage/customer-homepage.page.scss","src/app/pages/customer-homepage/customer-homepage.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>about-us</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n  <ion-content class=\\\"mapp\\\"> \\n    <style>\\n      .map {\\n        height: 80% !important;\\n      } \\n    </style>\\n    <div #mapElement class=\\\"map\\\"></div> \\n<ion-card (click)=\\\"openStreetPicker('from')\\\"> {{fromAddress}} </ion-card>\\n<ion-card (click)=\\\"openStreetPicker('to')\\\"> {{toAddress}} </ion-card>\\n<ion-button   href=\\\"tel:+4316800820\\\">>Call Customer</ion-button>\\n\\n<ion-radio-group> \\n  1<ion-radio  (click)=\\\"setNumberOfPersons(1)\\\"></ion-radio>\\n  2<ion-radio  (click)=\\\"setNumberOfPersons(2)\\\"></ion-radio>\\n  3<ion-radio  (click)=\\\"setNumberOfPersons(3)\\\"></ion-radio>\\n  4<ion-radio  (click)=\\\"setNumberOfPersons(4)\\\"></ion-radio>\\n</ion-radio-group>\\n<br/>\\n  <ion-button (click)=\\\"orderTaxi()\\\">{{ \\\"customerHomepage.myRides\\\" | translate }}</ion-button>\\n  </ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CustomerHomepagePage } from './customer-homepage.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CustomerHomepagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CustomerHomepagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CustomerHomepagePageRoutingModule } from './customer-homepage-routing.module';\n\nimport { CustomerHomepagePage } from './customer-homepage.page';\nimport {TranslateModule} from '@ngx-translate/core';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule, \n    CustomerHomepagePageRoutingModule,\n    TranslateModule\n  ],\n  declarations: [CustomerHomepagePage]\n})\nexport class CustomerHomepagePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2N1c3RvbWVyLWhvbWVwYWdlL2N1c3RvbWVyLWhvbWVwYWdlLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\nimport { ModalController, Platform } from \"@ionic/angular\";\nimport { StreetPickerPage } from \"../popups/street-picker/street-picker.page\";\nimport { Router } from \"@angular/router\";\nimport { LocationService } from '../../services/location.service';\nimport { AndroidPermissions } from \"@ionic-native/android-permissions/ngx\";\nimport {\n  Geolocation,\n  GeolocationOptions,\n  Geoposition,\n  PositionError\n} from \"@ionic-native/geolocation/ngx\";\n\ndeclare var google;\n@Component({\n  selector: \"app-customer-homepage\",\n  templateUrl: \"./customer-homepage.page.html\",\n  styleUrls: [\"./customer-homepage.page.scss\"]\n})\nexport class CustomerHomepagePage implements OnInit, AfterContentInit {\n  map;\n  fromAddress: String;\n  toAddress: String;\n  currentLocation:any;\n  numberOfPersons:String\n  @ViewChild(\"mapElement\", { static: true }) mapElement;\n\n  constructor(\n    private modalcontroller: ModalController,\n    private router: Router,\n    private locationService: LocationService,\n    private androidPermissions: AndroidPermissions,\n    private platform: Platform,\n    private geolocation: Geolocation\n\n  ) {\n    this.fromAddress = \"Kliknite za unos addrese\";\n    this.toAddress = \"Kliknite za unos addrese\";\n  }\n\n  ngOnInit() {}\n\n   ngAfterContentInit(): void {\n    this.platform.ready().then(() => { \n\n      let perms = [\"android.permission.ACCESS_COARSE_LOCATION\",\n      \"android.permission.ACCESS_FINE_LOCATION\",\n      \"android.permission.ACCESS_BACKGROUND_LOCATION\"\n  ]\n\n  this.androidPermissions.requestPermissions([this.androidPermissions.PERMISSION.ACCESS_BACKGROUND_LOCATION,this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION, this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION]).then(\n\n         (result) => {alert('Has permission?'+ result.hasPermission), \n      navigator.geolocation.getCurrentPosition(resp => { \n        alert();\n        this.initializeMap();     \n      });\n      }); \n  });\n  }\n\n async initializeMap(){\n    this.currentLocation =  await this.locationService.getUserPosition();\n     this.map = new google.maps.Map(this.mapElement.nativeElement, {\n       center: { lat: this.currentLocation.coords.latitude, lng: this.currentLocation.coords.longitude },\n       zoom: 16\n     });\n      var streetLocation = await this.locationService.getReverseGeocode(this.currentLocation.coords.latitude,this.currentLocation.coords.longitude)\n      this.fromAddress = streetLocation[0].thoroughfare + \",\" + streetLocation[0].subThoroughfare + \",\" + streetLocation[0].locality\n      this.toAddress = streetLocation[0].thoroughfare + \",\" + streetLocation[0].subThoroughfare + \",\" + streetLocation[0].locality\n\n      console.log(this.fromAddress)\n      this.addMarker(this.map)\n    }\n\n    addMarker(map:any){\n      let marker = new google.maps.Marker({\n        map: map,\n        animation: google.maps.Animation.DROP,\n        position: map.getCenter()\n      });\n    }\n      \n  async openStreetPicker(picker) {\n    const modal = await this.modalcontroller.create({\n      component: StreetPickerPage,\n      componentProps: {\n        picker: picker\n      }\n    });\n    \n    modal.onDidDismiss().then(response => {\n      const data = response[\"data\"];\n      if (data[\"address\"] == null) {\n        return;\n      }\n      if (data[\"picker\"] == \"from\") {\n        this.fromAddress = data[\"address\"];\n      } else {\n        this.toAddress = data[\"address\"];\n      }\n    });\n\n    return await modal.present();\n  }\n\n  setNumberOfPersons(numberOfPersons){\n    this.numberOfPersons = numberOfPersons;\n  }\n\n  async orderTaxi() {  \n    let fromAddress = await this.locationService.getForwardGeocode2(this.fromAddress + \", Varaždin, Croatia\"); \n    let toAddress = await this.locationService.getForwardGeocode2(this.toAddress + \", Varaždin, Croatia\");  \n    let params = {\n      fromLat: fromAddress[\"latitude\"],\n      fromLong: fromAddress[\"longitude\"],\n      toLat:toAddress[\"latitude\"],\n      toLong:toAddress[\"longitude\"],\n      persons: this.numberOfPersons\n    };\n\n    //   let params = {\n    //   fromLat: \"46.13123\",\n    //   fromLong: \"16.123144\",\n    //   toLat: \"46.13123\",\n    //   toLong: \"16.123144\",\n    // };\n    this.router.navigate([\"/search-ride\"],  { queryParams: {data:JSON.stringify(params)} });\n  }\n}\n"],"sourceRoot":"webpack:///","file":"9-es5.js"}