function _defineProperties(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{h06z:function(e,n,t){"use strict";t.r(n),t.d(n,"DriverHomepagePageModuleNgFactory",(function(){return C}));var l=t("8Y7J"),o=function e(){_classCallCheck(this,e)},r=t("pMnS"),i=t("oBZk"),s=t("ZZ/e"),u=t("SVse"),a=t("mrSG"),c=t("yHma"),p=t("5U9e"),d=function(){function e(n,t,l,o){var r=this;_classCallCheck(this,e),this.locationService=n,this.route=t,this.socketService=l,this.storage=o,this.isUserLoggedIn=!1,this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this.storage.get("username").then((function(e){null!=e&&(r.isUserLoggedIn=!0)})),this.initializeMap();var i=this.route.snapshot.queryParamMap.get("data");if(null!=i){var s=JSON.parse(i);this.message=s,this.phoneNumber=s.phoneNumber,"true"==this.route.snapshot.queryParamMap.get("driveIsStarted")&&(this.isDriveStarted=!0),this.directionsDisplay.setMap(this.map),this.populateAddress(this.message)}}return _createClass(e,[{key:"ngAfterContentInit",value:function(){}},{key:"calculateAndDisplayRoute",value:function(){var e=this;this.directionsService.route({origin:this.fromAddress,destination:this.toAddress,travelMode:"DRIVING"},(function(n,t){"OK"===t?e.directionsDisplay.setDirections(n):window.alert("Directions request failed due to "+t)}))}},{key:"addYourLocationButton",value:function(e,n){var t=document.createElement("div"),l=document.createElement("button");l.style.backgroundColor="#fff",l.style.border="none",l.style.outline="none",l.style.width="28px",l.style.height="28px",l.style.borderRadius="2px",l.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",l.style.cursor="pointer",l.style.marginLEFT="10px",l.style.padding="0",l.title="Your Location",t.appendChild(l);var o=document.createElement("div");o.style.margin="5px",o.style.width="18px",o.style.height="18px",o.style.backgroundImage="url(https://maps.gstatic.com/tactile/mylocation/mylocation-sprite-2x.png)",o.style.backgroundSize="180px 18px",o.style.backgroundPosition="0 0",o.style.backgroundRepeat="no-repeat",l.appendChild(o),google.maps.event.addListener(e,"center_changed",(function(){o.style["background-position"]="0 0"})),l.addEventListener("click",(function(){var n=0,t=setInterval((function(){o.style["background-position"]=(n=-n-18)+"px 0"}),500);navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var l=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);e.setCenter(l),clearInterval(t),o.style["background-position"]="-144px 0"})):(clearInterval(t),o.style["background-position"]="0 0")})),t.index=1,e.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(t)}},{key:"populateAddress",value:function(e){return a.b(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.locationService.getReverseGeocode(e.fromLat,e.fromLong);case 2:return t=n.sent,this.fromAddress=t[0].thoroughfare+","+t[0].subThoroughfare+","+t[0].locality,n.next=6,this.locationService.getReverseGeocode(e.toLat,e.toLong);case 6:l=n.sent,this.toAddress=l[0].thoroughfare+","+l[0].subThoroughfare+","+l[0].locality,this.calculateAndDisplayRoute();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"initializeMap",value:function(){return a.b(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.locationService.getUserPosition();case 2:this.currentLocation=e.sent,n=new google.maps.DirectionsRenderer,this.map=new google.maps.Map(this.mapElement.nativeElement,{center:{lat:this.currentLocation.coords.latitude,lng:this.currentLocation.coords.longitude},zoom:16,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}),t=new google.maps.Marker({map:this.map,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(this.currentLocation.coords.latitude,this.currentLocation.coords.longitude)}),this.addYourLocationButton(this.map,t),this.directionsDisplay.setMap(this.map),l=new google.maps.DirectionsService,n.setMap(this.map),n=new google.maps.DirectionsRenderer,this.displayDirection(l,n);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"endDrive",value:function(){var e=this;this.storage.get("username").then((function(n){e.socketService.send("/server-receiver",{type:"customer",messageType:"FINISH_DRIVE",driver:n,customer:e.message.customer})})),location.reload()}},{key:"driverIsOnSpot",value:function(){var e=this;this.storage.get("username").then((function(n){e.socketService.send("/server-receiver",{type:"customer",messageType:"ON_SPOT",driver:n,customer:e.message.customer})}))}},{key:"displayDirection",value:function(e,n){e.route({origin:new google.maps.LatLng(this.currentLocation.coords.latitude,this.currentLocation.coords.longitude),destination:this.toAddress,travelMode:"DRIVING"},(function(e,t){"OK"===t&&n.setDirections(e)}))}},{key:"ngOnInit",value:function(){}},{key:"callSOS",value:function(){return a.b(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.locationService.getUserPosition();case 2:this.currentLocation=e.sent,console.log("DSAD"),this.storage.get("username").then((function(e){n.storage.get("username").then((function(t){n.socketService.send("/server-receiver",{type:"customer",messageType:"SOS",driver:e,phoneNumber:t,fromLat:n.currentLocation.coords.latitude,fromLong:n.currentLocation.coords.longitude})}))}));case 5:case"end":return e.stop()}}),e,this)})))}}]),e}(),g=t("iInd"),b=t("xgBC"),m=l.zb({encapsulation:0,styles:[".map[_ngcontent-%COMP%] {\n      height: 47% !important;\n    }",[".map[_ngcontent-%COMP%]{margin:20px}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-bottom:1px solid #000;padding-bottom:15px;margin:20px}.buttons[_ngcontent-%COMP%]   .call-customer[_ngcontent-%COMP%]{--background:#46e169;color:#393939;font-size:13px;width:100px}.buttons[_ngcontent-%COMP%]   .finish-drive[_ngcontent-%COMP%]{--background:#393939;color:#46e169;font-size:13px;width:100px}.buttons[_ngcontent-%COMP%]   .end-drive[_ngcontent-%COMP%]{--background:#9c9cac;color:#fff;font-size:13px;width:100px}.drive-request[_ngcontent-%COMP%]{padding:0 20px}.drive-request[_ngcontent-%COMP%]   .location-from[_ngcontent-%COMP%]{padding-bottom:15px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.drive-request[_ngcontent-%COMP%]   .location-from[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;text-shadow:0 0 .3em rgba(0,0,0,.4);margin-bottom:10px;font-size:13px}.drive-request[_ngcontent-%COMP%]   .location-from[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);border:1px solid #000;box-shadow:6px 6px 18px 0 rgba(0,0,0,.3);height:40px;padding:10px;font-size:13px}.header-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:10px}.header-box[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;text-transform:uppercase}.header-box[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;--background:#f4f0ec;width:50px;height:50px;border-radius:50%}.header-box[_ngcontent-%COMP%]   .sos[_ngcontent-%COMP%]{background:#dc143c;float:right;width:50px;height:50px;border-radius:50%;padding:0;margin:0 20px 0 0;color:#fff;font-weight:700}"]],data:{}});function f(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,1,"button",[["class","sos"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.callSOS()&&l),l}),null,null)),(e()(),l.Tb(-1,null,["SOS"]))],null,null)}function h(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,2,"ion-button",[["class","call-customer"]],null,null,null,i.x,i.b)),l.Ab(1,49152,null,0,s.k,[l.j,l.p,l.F],{href:[0,"href"]},null),(e()(),l.Tb(-1,0,["Nazovi"]))],(function(e,n){e(n,1,0,l.Fb(1,"tel:",n.component.phoneNumber,""))}),null)}function y(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,2,"ion-button",[["class","finish-drive"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.driverIsOnSpot()&&l),l}),i.x,i.b)),l.Ab(1,49152,null,0,s.k,[l.j,l.p,l.F],null,null),(e()(),l.Tb(-1,0,["Na adresi"]))],null,null)}function v(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,2,"ion-button",[["class","end-drive"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.endDrive()&&l),l}),i.x,i.b)),l.Ab(1,49152,null,0,s.k,[l.j,l.p,l.F],null,null),(e()(),l.Tb(-1,0,["Zavr\u0161i"]))],null,null)}function x(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,10,"div",[["class","drive-request"]],null,null,null,null,null)),(e()(),l.Bb(1,0,null,null,4,"div",[["class","location-from"]],null,null,null,null,null)),(e()(),l.Bb(2,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(e()(),l.Tb(-1,null,["Polazi\u0161te:"])),(e()(),l.Bb(4,0,null,null,1,"span",[["class","value"]],null,null,null,null,null)),(e()(),l.Tb(5,null,["",""])),(e()(),l.Bb(6,0,null,null,4,"div",[["class","location-from"]],null,null,null,null,null)),(e()(),l.Bb(7,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(e()(),l.Tb(-1,null,["Odredi\u0161te:"])),(e()(),l.Bb(9,0,null,null,1,"span",[["class","value"]],null,null,null,null,null)),(e()(),l.Tb(10,null,["",""]))],null,(function(e,n){var t=n.component;e(n,5,0,t.fromAddress),e(n,10,0,t.toAddress)}))}function k(e){return l.Vb(0,[l.Rb(402653184,1,{mapElement:0}),(e()(),l.Bb(1,0,null,null,13,"ion-header",[],null,null,null,i.B,i.f)),l.Ab(2,49152,null,0,s.B,[l.j,l.p,l.F],{translucent:[0,"translucent"]},null),(e()(),l.Bb(3,0,null,0,11,"ion-toolbar",[],null,null,null,i.R,i.v)),l.Ab(4,49152,null,0,s.Cb,[l.j,l.p,l.F],null,null),(e()(),l.Bb(5,0,null,0,9,"div",[["class","header-box"]],null,null,null,null,null)),(e()(),l.Bb(6,0,null,null,3,"ion-buttons",[["slot","start"]],null,null,null,i.y,i.c)),l.Ab(7,49152,null,0,s.l,[l.j,l.p,l.F],null,null),(e()(),l.Bb(8,0,null,0,1,"ion-menu-button",[],null,null,null,i.H,i.m)),l.Ab(9,49152,null,0,s.R,[l.j,l.p,l.F],null,null),(e()(),l.Bb(10,0,null,null,2,"ion-title",[],null,null,null,i.Q,i.u)),l.Ab(11,49152,null,0,s.Ab,[l.j,l.p,l.F],null,null),(e()(),l.Tb(-1,0,["Mura Taxi"])),(e()(),l.qb(16777216,null,null,1,null,f)),l.Ab(14,16384,null,0,u.i,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(e()(),l.Bb(15,0,null,null,11,"ion-content",[["class","mapp"]],null,null,null,i.A,i.e)),l.Ab(16,49152,null,0,s.u,[l.j,l.p,l.F],null,null),(e()(),l.Bb(17,0,[[1,0],["mapElement",1]],0,0,"div",[["class","map"]],null,null,null,null,null)),(e()(),l.Bb(18,0,null,0,6,"div",[["class","buttons"]],null,null,null,null,null)),(e()(),l.qb(16777216,null,null,1,null,h)),l.Ab(20,16384,null,0,u.i,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(e()(),l.qb(16777216,null,null,1,null,y)),l.Ab(22,16384,null,0,u.i,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(e()(),l.qb(16777216,null,null,1,null,v)),l.Ab(24,16384,null,0,u.i,[l.W,l.S],{ngIf:[0,"ngIf"]},null),(e()(),l.qb(16777216,null,0,1,null,x)),l.Ab(26,16384,null,0,u.i,[l.W,l.S],{ngIf:[0,"ngIf"]},null)],(function(e,n){var t=n.component;e(n,2,0,!0),e(n,14,0,t.isUserLoggedIn),e(n,20,0,t.isDriveStarted),e(n,22,0,t.isDriveStarted),e(n,24,0,t.isDriveStarted),e(n,26,0,t.isDriveStarted)}),null)}var w=l.xb("app-driver-homepage",d,(function(e){return l.Vb(0,[(e()(),l.Bb(0,0,null,null,1,"app-driver-homepage",[],null,null,null,k,m)),l.Ab(1,1163264,null,0,d,[c.a,g.a,p.a,b.b],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]),T=t("s7LF"),L=function e(){_classCallCheck(this,e)},C=l.yb(o,[],(function(e){return l.Kb([l.Lb(512,l.m,l.jb,[[8,[r.a,w]],[3,l.m],l.D]),l.Lb(4608,u.k,u.j,[l.z,[2,u.t]]),l.Lb(4608,T.l,T.l,[]),l.Lb(4608,s.b,s.b,[l.F,l.g]),l.Lb(4608,s.Gb,s.Gb,[s.b,l.m,l.w]),l.Lb(4608,s.Kb,s.Kb,[s.b,l.m,l.w]),l.Lb(1073742336,u.b,u.b,[]),l.Lb(1073742336,T.k,T.k,[]),l.Lb(1073742336,T.d,T.d,[]),l.Lb(1073742336,s.Eb,s.Eb,[]),l.Lb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),l.Lb(1073742336,L,L,[]),l.Lb(1073742336,o,o,[]),l.Lb(1024,g.k,(function(){return[[{path:"",component:d}]]}),[])])}))}}]);