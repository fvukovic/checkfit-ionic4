{"version":3,"sources":["src/app/pages/search-ride/search-ride.page.html","src/app/pages/search-ride/search-ride-routing.module.ts","src/app/pages/search-ride/search-ride.module.ts","src/app/pages/search-ride/search-ride.page.scss","src/app/pages/search-ride/search-ride.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>search-ride</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=container4>\\r\\n    <div *ngIf=\\\"!isDriveAccepted\\\" >\\r\\n      \\r\\n      <p>Tražim slobodnog vozača...</p>\\r\\n      <ion-spinner style=\\\"width:150px\\\" color=\\\"tertiary\\\" class=\\\"ion-color ion-color-tertiary ios spinner-lines hydrated\\\"\\r\\n        role=\\\"progressbar\\\"></ion-spinner>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"isDriveAccepted\\\" >\\r\\n        <h2>Vaše vozilo stiže!!</h2>\\r\\n\\r\\n        <p>Vaše vozilo je udaljeno:</p> \\r\\n        <p>{{kms}}</p> \\r\\n      </div>\\r\\n  </div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SearchRidePage } from './search-ride.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SearchRidePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SearchRidePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SearchRidePageRoutingModule } from './search-ride-routing.module';\r\n\r\nimport { SearchRidePage } from './search-ride.page';\r\nimport { SocketIoModule, SocketIoConfig } from 'ngx-socket-io';\r\n\r\n \r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SearchRidePageRoutingModule\r\n  ],\r\n  declarations: [SearchRidePage]\r\n})\r\nexport class SearchRidePageModule {}\r\n","export default \".container4 {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translateX(-50%) translateY(-50%);\\n          transform: translateX(-50%) translateY(-50%);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2VhcmNoLXJpZGUvQzpcXG11cmFBcHBcXGNoZWNrZml0LWlvbmljNFxcbW9iaWxlX2FwcC9zcmNcXGFwcFxccGFnZXNcXHNlYXJjaC1yaWRlXFxzZWFyY2gtcmlkZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3NlYXJjaC1yaWRlL3NlYXJjaC1yaWRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxvREFBQTtVQUFBLDRDQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zZWFyY2gtcmlkZS9zZWFyY2gtcmlkZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyNCB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIGxlZnQ6IDUwJTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKC01MCUpO1xyXG59IiwiLmNvbnRhaW5lcjQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKC01MCUpO1xufSJdfQ== */\"","import { Component, OnInit, AfterContentInit, ViewChild } from \"@angular/core\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { Events } from \"@ionic/angular\";\r\nimport { Storage } from \"@ionic/storage\";\r\n\r\n@Component({\r\n  selector: \"app-search-ride\",\r\n  templateUrl: \"./search-ride.page.html\",\r\n  styleUrls: [\"./search-ride.page.scss\"]\r\n})\r\nexport class SearchRidePage implements OnInit, AfterContentInit {\r\n  map: any;\r\n  lat: String;\r\n  long: String;\r\n  lat2: String;\r\n  long2: String;\r\n  isDriveAccepted: boolean = false;\r\n  kms: String;\r\n\r\n  constructor(\r\n    public socketService: SocketService,\r\n    private route: ActivatedRoute,\r\n    public events: Events,\r\n    private storage: Storage\r\n  ) {\r\n    \r\n    // var handle = setInterval(data => {\r\n    //   if (this.isDriveAccepted) {\r\n    //     clearInterval(handle);\r\n    //   } else {\r\n    //   }\r\n    // }, 5000);\r\n\r\n    events.subscribe(\"driveAccepted\", message => {\r\n      this.isDriveAccepted = true;\r\n    });\r\n\r\n    events.subscribe(\"informCustomer\", message => {\r\n      console.log(message);\r\n      this.kms = message;\r\n    });\r\n\r\n    events.subscribe(\"driveIsFinished\", message => {\r\n      this.isDriveAccepted = false;\r\n      this.kms = message;\r\n    });\r\n    this.requestDrive();\r\n  }\r\n  requestDrive() {\r\n    const firstParam: string = this.route.snapshot.queryParamMap.get(\"data\");\r\n    let params = JSON.parse(firstParam);\r\n    this.storage.get(\"phoneNumber\").then(val => {\r\n      this.socketService.send(\"/server-receiver\", {\r\n        type: \"customer\",\r\n        messageType: \"DRIVE_REQUEST\",\r\n        fromLat: params.fromLat,\r\n        fromLong: params.fromLong,\r\n        toLat: params.toLat,\r\n        toLong: params.toLong,\r\n        phoneNumber: val\r\n      });\r\n    });\r\n  }\r\n\r\n  ngAfterContentInit(): void {}\r\n\r\n  ngOnInit() {}\r\n}\r\n"],"sourceRoot":"webpack:///","file":"13-es5.js"}