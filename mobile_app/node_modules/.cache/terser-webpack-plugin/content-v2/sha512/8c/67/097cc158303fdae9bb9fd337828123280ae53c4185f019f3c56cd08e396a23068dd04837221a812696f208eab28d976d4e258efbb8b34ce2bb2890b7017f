{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{\"S+p2\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"SearchRidePageModuleNgFactory\",(function(){return SearchRidePageModuleNgFactory}));var core=__webpack_require__(\"8Y7J\");class SearchRidePageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),core_ngfactory=__webpack_require__(\"oBZk\"),fesm5=__webpack_require__(\"ZZ/e\"),common=__webpack_require__(\"SVse\"),tslib_es6=__webpack_require__(\"mrSG\"),socket_service=__webpack_require__(\"5U9e\"),location_service=__webpack_require__(\"yHma\");class search_ride_page_SearchRidePage{constructor(socketService,route,events,storage,locationService,router,alertController){this.socketService=socketService,this.route=route,this.events=events,this.storage=storage,this.locationService=locationService,this.router=router,this.alertController=alertController,this.isDriveAccepted=!1,this.seconds=20,events.subscribe(\"driveAccepted\",message=>{this.isDriveAccepted=!0,clearInterval(this.myVar),this.message=message}),events.subscribe(\"informCustomer\",message=>{console.log(message),this.kms=message}),events.subscribe(\"driveIsFinished\",message=>{this.isDriveAccepted=!1,this.kms=message}),this.requestDrive()}requestDrive(){const firstParam=this.route.snapshot.queryParamMap.get(\"data\");let params=JSON.parse(firstParam);var _this=this;this.storage.get(\"phoneNumber\").then(val=>{this.locationService.getDistanceFromLatLonInKm(params.fromLat,params.fromLong,params.toLat,params.toLong,(function(response,status){_this.socketService.send(\"/server-receiver\",{type:\"customer\",messageType:\"REQUEST_INCOMING\",fromLat:params.fromLat,fromLong:params.fromLong,toLat:params.toLat,toLong:params.toLong,persons:params.persons,phoneNumber:val,km:response.rows[0].elements[0].distance.value/1e3}),setTimeout(data=>{_this.socketService.send(\"/server-receiver\",{type:\"customer\",messageType:\"DRIVE_REQUEST\",fromLat:params.fromLat,fromLong:params.fromLong,toLat:params.toLat,toLong:params.toLong,persons:params.persons,phoneNumber:val,km:response.rows[0].elements[0].distance.value/1e3})},4e3)}));let myVar=setInterval(()=>{this.seconds-=1,0==this.seconds&&(clearInterval(myVar),this.presentAlert({cssClass:\"myClass\",header:\"Obavijest\",message:'<div style=\"color:red\" class=\"myClass\"><p>Vaša vožnja je zaprimljena, prvi slobodni vozač će Vas uskoro kontaktirati.</p> </div>',buttons:[\"U redu\"]}))},1e3)})}presentAlert(options){return tslib_es6.b(this,void 0,void 0,(function*(){const alert=yield this.alertController.create(options);yield alert.present()}))}ngAfterContentInit(){}ngOnInit(){}}var router=__webpack_require__(\"iInd\"),ionic_storage=__webpack_require__(\"xgBC\"),RenderType_SearchRidePage=core.zb({encapsulation:0,styles:[[\".container[_ngcontent-%COMP%]{margin:0 20px 20px;padding:20px}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-size:16px;font-weight:700;margin-bottom:0}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:42px;color:#46e169;float:left}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:13px;padding-left:20px;margin:20px 0;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;padding:20px 0;margin:20px 0 0}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0 0 20px;font-size:26px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:18px;text-transform:initial;margin:30px 0 0;background:#46e169;color:#fff;border-radius:5px;padding:20px;font-weight:700}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color:#46e169;font-size:80px;-webkit-transform:scale(2);transform:scale(2)}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{text-align:center;border-bottom:1px solid #000;margin-top:30px}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .menu-img[_ngcontent-%COMP%]{max-width:40%}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;font-weight:700}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-transform:uppercase;border-bottom:1px solid #000;padding-bottom:15px}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:55%}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#46e169;background:#393939;padding:20px;border-radius:5px;margin-bottom:10px}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .driver[_ngcontent-%COMP%]{margin:20px 0;font-style:italic}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .km[_ngcontent-%COMP%]{font-size:30px}.header-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:10px}img[_ngcontent-%COMP%]{max-width:50px}ion-title[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;text-transform:uppercase;font-size:16px}.seconds[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}\"]],data:{}});function View_SearchRidePage_2(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,1,\"div\",[[\"class\",\"seconds\"]],null,null,null,null,null)),(_l()(),core.Tb(1,null,[\"\",\"\"]))],null,(function(_ck,_v){_ck(_v,1,0,_v.component.seconds)}))}function View_SearchRidePage_1(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,16,\"div\",[],null,null,null,null,null)),(_l()(),core.Bb(1,0,null,null,4,\"div\",[[\"class\",\"wrapper-request\"]],null,null,null,null,null)),(_l()(),core.Bb(2,0,null,null,1,\"ion-icon\",[[\"name\",\"checkbox\"]],null,null,null,core_ngfactory.C,core_ngfactory.g)),core.Ab(3,49152,null,0,fesm5.C,[core.j,core.p,core.F],{name:[0,\"name\"]},null),(_l()(),core.Bb(4,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Vaš zahtjev je uspješno poslan!\"])),(_l()(),core.Bb(6,0,null,null,6,\"div\",[[\"class\",\"seacrhing-driver\"]],null,null,null,null,null)),(_l()(),core.Bb(7,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Tražim slobodnog vozača...\"])),(_l()(),core.qb(16777216,null,null,1,null,View_SearchRidePage_2)),core.Ab(10,16384,null,0,common.i,[core.W,core.S],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.Bb(11,0,null,null,1,\"p\",[[\"class\",\"details\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Detalji će uskoro biti vidljivi na ekranu:\"])),(_l()(),core.Bb(13,0,null,null,3,\"div\",[[\"class\",\"logo\"]],null,null,null,null,null)),(_l()(),core.Bb(14,0,null,null,0,\"img\",[[\"class\",\"menu-img\"],[\"src\",\"../../../assets/img/taxiLogo.png\"]],null,null,null,null,null)),(_l()(),core.Bb(15,0,null,null,1,\"p\",[[\"class\",\"rich-text\"]],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Najmodernija i najkvalitetnija usluga prijevoza u gradu!\"]))],(function(_ck,_v){var _co=_v.component;_ck(_v,3,0,\"checkbox\"),_ck(_v,10,0,0!=_co.seconds)}),null)}function View_SearchRidePage_3(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,16,\"div\",[],null,null,null,null,null)),(_l()(),core.Bb(1,0,null,null,15,\"div\",[[\"class\",\"accepted-ride\"]],null,null,null,null,null)),(_l()(),core.Bb(2,0,null,null,0,\"img\",[[\"class\",\"menu-img\"],[\"src\",\"../../../assets/img/accepted-ride.png\"]],null,null,null,null,null)),(_l()(),core.Bb(3,0,null,null,1,\"h2\",[],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Zahtjev je prihvaćen!\"])),(_l()(),core.Bb(5,0,null,null,1,\"p\",[[\"class\",\"driver\"]],null,null,null,null,null)),(_l()(),core.Tb(6,null,[\"Vozač \",\" će Vas uskoro kontaktirati...\"])),(_l()(),core.Bb(7,0,null,null,4,\"div\",[[\"class\",\"distance\"]],null,null,null,null,null)),(_l()(),core.Bb(8,0,null,null,1,\"span\",[],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Vaše vozilo je udaljeno:\"])),(_l()(),core.Bb(10,0,null,null,1,\"p\",[[\"class\",\"km\"]],null,null,null,null,null)),(_l()(),core.Tb(11,null,[\"\",\"\"])),(_l()(),core.Bb(12,0,null,null,4,\"div\",[[\"class\",\"distance\"]],null,null,null,null,null)),(_l()(),core.Bb(13,0,null,null,1,\"span\",[],null,null,null,null,null)),(_l()(),core.Tb(-1,null,[\"Vozilo stiže za:\"])),(_l()(),core.Bb(15,0,null,null,1,\"p\",[[\"class\",\"km\"]],null,null,null,null,null)),(_l()(),core.Tb(16,null,[\"\",\" min\"]))],null,(function(_ck,_v){var _co=_v.component;_ck(_v,6,0,_co.message.driverUser.login),_ck(_v,11,0,_co.kms),_ck(_v,16,0,_co.message.time)}))}function View_SearchRidePage_0(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,8,\"ion-header\",[],null,null,null,core_ngfactory.B,core_ngfactory.f)),core.Ab(1,49152,null,0,fesm5.B,[core.j,core.p,core.F],{translucent:[0,\"translucent\"]},null),(_l()(),core.Bb(2,0,null,0,6,\"ion-toolbar\",[],null,null,null,core_ngfactory.R,core_ngfactory.v)),core.Ab(3,49152,null,0,fesm5.Cb,[core.j,core.p,core.F],null,null),(_l()(),core.Bb(4,0,null,0,4,\"div\",[[\"class\",\"header-box\"]],null,null,null,null,null)),(_l()(),core.Bb(5,0,null,null,2,\"ion-title\",[],null,null,null,core_ngfactory.Q,core_ngfactory.u)),core.Ab(6,49152,null,0,fesm5.Ab,[core.j,core.p,core.F],null,null),(_l()(),core.Tb(-1,0,[\"Novi zahtjev za vožnju!\"])),(_l()(),core.Bb(8,0,null,null,0,\"img\",[[\"src\",\"../../../assets/img/taxiLogo.png\"]],null,null,null,null,null)),(_l()(),core.Bb(9,0,null,null,6,\"ion-content\",[],null,null,null,core_ngfactory.A,core_ngfactory.e)),core.Ab(10,49152,null,0,fesm5.u,[core.j,core.p,core.F],null,null),(_l()(),core.Bb(11,0,null,0,4,\"div\",[[\"class\",\"container\"]],null,null,null,null,null)),(_l()(),core.qb(16777216,null,null,1,null,View_SearchRidePage_1)),core.Ab(13,16384,null,0,common.i,[core.W,core.S],{ngIf:[0,\"ngIf\"]},null),(_l()(),core.qb(16777216,null,null,1,null,View_SearchRidePage_3)),core.Ab(15,16384,null,0,common.i,[core.W,core.S],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,!0),_ck(_v,13,0,!_co.isDriveAccepted),_ck(_v,15,0,_co.isDriveAccepted)}),null)}function View_SearchRidePage_Host_0(_l){return core.Vb(0,[(_l()(),core.Bb(0,0,null,null,1,\"app-search-ride\",[],null,null,null,View_SearchRidePage_0,RenderType_SearchRidePage)),core.Ab(1,1163264,null,0,search_ride_page_SearchRidePage,[socket_service.a,router.a,fesm5.e,ionic_storage.b,location_service.a,router.m,fesm5.a],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var SearchRidePageNgFactory=core.xb(\"app-search-ride\",search_ride_page_SearchRidePage,View_SearchRidePage_Host_0,{},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\");class SearchRidePageRoutingModule{}var SearchRidePageModuleNgFactory=core.yb(SearchRidePageModule,[],(function(_l){return core.Kb([core.Lb(512,core.m,core.jb,[[8,[router_ngfactory.a,SearchRidePageNgFactory]],[3,core.m],core.D]),core.Lb(4608,common.k,common.j,[core.z,[2,common.t]]),core.Lb(4608,fesm2015_forms.l,fesm2015_forms.l,[]),core.Lb(4608,fesm5.b,fesm5.b,[core.F,core.g]),core.Lb(4608,fesm5.Gb,fesm5.Gb,[fesm5.b,core.m,core.w]),core.Lb(4608,fesm5.Kb,fesm5.Kb,[fesm5.b,core.m,core.w]),core.Lb(1073742336,common.b,common.b,[]),core.Lb(1073742336,fesm2015_forms.k,fesm2015_forms.k,[]),core.Lb(1073742336,fesm2015_forms.d,fesm2015_forms.d,[]),core.Lb(1073742336,fesm5.Eb,fesm5.Eb,[]),core.Lb(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Lb(1073742336,SearchRidePageRoutingModule,SearchRidePageRoutingModule,[]),core.Lb(1073742336,SearchRidePageModule,SearchRidePageModule,[]),core.Lb(1024,router.k,(function(){return[[{path:\"\",component:search_ride_page_SearchRidePage}]]}),[])])}))}}]);","extractedComments":[]}