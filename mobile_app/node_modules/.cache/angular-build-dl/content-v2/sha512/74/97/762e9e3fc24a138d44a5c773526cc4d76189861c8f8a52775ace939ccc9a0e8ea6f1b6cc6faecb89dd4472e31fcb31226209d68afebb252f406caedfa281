(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"S+p2":function(n,l,e){"use strict";e.r(l),e.d(l,"SearchRidePageModuleNgFactory",(function(){return _}));var t=e("8Y7J");class u{}var o=e("pMnS"),i=e("oBZk"),r=e("ZZ/e"),a=e("SVse"),s=e("mrSG"),c=e("5U9e"),g=e("yHma");class p{constructor(n,l,e,t,u,o,i){this.socketService=n,this.route=l,this.events=e,this.storage=t,this.locationService=u,this.router=o,this.alertController=i,this.isDriveAccepted=!1,this.seconds=20,e.subscribe("driveAccepted",n=>{this.isDriveAccepted=!0,clearInterval(this.myVar),this.message=n}),e.subscribe("informCustomer",n=>{console.log(n),this.kms=n}),e.subscribe("driveIsFinished",n=>{this.isDriveAccepted=!1,this.kms=n}),this.requestDrive()}requestDrive(){const n=this.route.snapshot.queryParamMap.get("data");let l=JSON.parse(n);var e=this;this.storage.get("phoneNumber").then(n=>{this.locationService.getDistanceFromLatLonInKm(l.fromLat,l.fromLong,l.toLat,l.toLong,(function(t,u){e.socketService.send("/server-receiver",{type:"customer",messageType:"REQUEST_INCOMING",fromLat:l.fromLat,fromLong:l.fromLong,toLat:l.toLat,toLong:l.toLong,persons:l.persons,phoneNumber:n,km:t.rows[0].elements[0].distance.value/1e3}),setTimeout(u=>{e.socketService.send("/server-receiver",{type:"customer",messageType:"DRIVE_REQUEST",fromLat:l.fromLat,fromLong:l.fromLong,toLat:l.toLat,toLong:l.toLong,persons:l.persons,phoneNumber:n,km:t.rows[0].elements[0].distance.value/1e3})},4e3)}));let t=setInterval(()=>{this.seconds-=1,0==this.seconds&&(clearInterval(t),this.presentAlert({cssClass:"myClass",header:"Obavijest",message:'<div style="color:red" class="myClass"><p>Va\u0161a vo\u017enja je zaprimljena, prvi slobodni voza\u010d \u0107e Vas uskoro kontaktirati.</p> </div>',buttons:["U redu"]}))},1e3)})}presentAlert(n){return s.b(this,void 0,void 0,(function*(){const l=yield this.alertController.create(n);yield l.present()}))}ngAfterContentInit(){}ngOnInit(){}}var b=e("iInd"),d=e("xgBC"),m=t.zb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{margin:0 20px 20px;padding:20px}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]{border-bottom:1px solid #000;text-align:center;font-size:16px;font-weight:700;margin-bottom:0}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:42px;color:#46e169;float:left}.container[_ngcontent-%COMP%]   .wrapper-request[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:13px;padding-left:20px;margin:20px 0;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;padding:20px 0;margin:20px 0 0}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0 0 20px;font-size:26px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:18px;text-transform:initial;margin:30px 0 0;background:#46e169;color:#fff;border-radius:5px;padding:20px;font-weight:700}.container[_ngcontent-%COMP%]   .seacrhing-driver[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color:#46e169;font-size:80px;-webkit-transform:scale(2);transform:scale(2)}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{text-align:center;border-bottom:1px solid #000;margin-top:30px}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .menu-img[_ngcontent-%COMP%]{max-width:40%}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;font-weight:700}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-transform:uppercase;border-bottom:1px solid #000;padding-bottom:15px}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:55%}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{color:#46e169;background:#393939;padding:20px;border-radius:5px;margin-bottom:10px}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .driver[_ngcontent-%COMP%]{margin:20px 0;font-style:italic}.container[_ngcontent-%COMP%]   .accepted-ride[_ngcontent-%COMP%]   .km[_ngcontent-%COMP%]{font-size:30px}.header-box[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:10px}img[_ngcontent-%COMP%]{max-width:50px}ion-title[_ngcontent-%COMP%]{text-shadow:0 0 .3em rgba(0,0,0,.4);--color:#000;text-transform:uppercase;font-size:16px}.seconds[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-shadow:0 0 .3em rgba(0,0,0,.4)}"]],data:{}});function v(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,1,"div",[["class","seconds"]],null,null,null,null,null)),(n()(),t.Tb(1,null,["",""]))],null,(function(n,l){n(l,1,0,l.component.seconds)}))}function h(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),t.Bb(1,0,null,null,4,"div",[["class","wrapper-request"]],null,null,null,null,null)),(n()(),t.Bb(2,0,null,null,1,"ion-icon",[["name","checkbox"]],null,null,null,i.C,i.g)),t.Ab(3,49152,null,0,r.C,[t.j,t.p,t.F],{name:[0,"name"]},null),(n()(),t.Bb(4,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Va\u0161 zahtjev je uspje\u0161no poslan!"])),(n()(),t.Bb(6,0,null,null,6,"div",[["class","seacrhing-driver"]],null,null,null,null,null)),(n()(),t.Bb(7,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Tra\u017eim slobodnog voza\u010da..."])),(n()(),t.qb(16777216,null,null,1,null,v)),t.Ab(10,16384,null,0,a.i,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.Bb(11,0,null,null,1,"p",[["class","details"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Detalji \u0107e uskoro biti vidljivi na ekranu:"])),(n()(),t.Bb(13,0,null,null,3,"div",[["class","logo"]],null,null,null,null,null)),(n()(),t.Bb(14,0,null,null,0,"img",[["class","menu-img"],["src","../../../assets/img/taxiLogo.png"]],null,null,null,null,null)),(n()(),t.Bb(15,0,null,null,1,"p",[["class","rich-text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Najmodernija i najkvalitetnija usluga prijevoza u gradu!"]))],(function(n,l){var e=l.component;n(l,3,0,"checkbox"),n(l,10,0,0!=e.seconds)}),null)}function C(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),t.Bb(1,0,null,null,15,"div",[["class","accepted-ride"]],null,null,null,null,null)),(n()(),t.Bb(2,0,null,null,0,"img",[["class","menu-img"],["src","../../../assets/img/accepted-ride.png"]],null,null,null,null,null)),(n()(),t.Bb(3,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Zahtjev je prihva\u0107en!"])),(n()(),t.Bb(5,0,null,null,1,"p",[["class","driver"]],null,null,null,null,null)),(n()(),t.Tb(6,null,["Voza\u010d "," \u0107e Vas uskoro kontaktirati..."])),(n()(),t.Bb(7,0,null,null,4,"div",[["class","distance"]],null,null,null,null,null)),(n()(),t.Bb(8,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Va\u0161e vozilo je udaljeno:"])),(n()(),t.Bb(10,0,null,null,1,"p",[["class","km"]],null,null,null,null,null)),(n()(),t.Tb(11,null,["",""])),(n()(),t.Bb(12,0,null,null,4,"div",[["class","distance"]],null,null,null,null,null)),(n()(),t.Bb(13,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Vozilo sti\u017ee za:"])),(n()(),t.Bb(15,0,null,null,1,"p",[["class","km"]],null,null,null,null,null)),(n()(),t.Tb(16,null,[""," min"]))],null,(function(n,l){var e=l.component;n(l,6,0,e.message.driverUser.login),n(l,11,0,e.kms),n(l,16,0,e.message.time)}))}function f(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,8,"ion-header",[],null,null,null,i.B,i.f)),t.Ab(1,49152,null,0,r.B,[t.j,t.p,t.F],{translucent:[0,"translucent"]},null),(n()(),t.Bb(2,0,null,0,6,"ion-toolbar",[],null,null,null,i.R,i.v)),t.Ab(3,49152,null,0,r.Cb,[t.j,t.p,t.F],null,null),(n()(),t.Bb(4,0,null,0,4,"div",[["class","header-box"]],null,null,null,null,null)),(n()(),t.Bb(5,0,null,null,2,"ion-title",[],null,null,null,i.Q,i.u)),t.Ab(6,49152,null,0,r.Ab,[t.j,t.p,t.F],null,null),(n()(),t.Tb(-1,0,["Novi zahtjev za vo\u017enju!"])),(n()(),t.Bb(8,0,null,null,0,"img",[["src","../../../assets/img/taxiLogo.png"]],null,null,null,null,null)),(n()(),t.Bb(9,0,null,null,6,"ion-content",[],null,null,null,i.A,i.e)),t.Ab(10,49152,null,0,r.u,[t.j,t.p,t.F],null,null),(n()(),t.Bb(11,0,null,0,4,"div",[["class","container"]],null,null,null,null,null)),(n()(),t.qb(16777216,null,null,1,null,h)),t.Ab(13,16384,null,0,a.i,[t.W,t.S],{ngIf:[0,"ngIf"]},null),(n()(),t.qb(16777216,null,null,1,null,C)),t.Ab(15,16384,null,0,a.i,[t.W,t.S],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,1,0,!0),n(l,13,0,!e.isDriveAccepted),n(l,15,0,e.isDriveAccepted)}),null)}function x(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,1,"app-search-ride",[],null,null,null,f,m)),t.Ab(1,1163264,null,0,p,[c.a,b.a,r.e,d.b,g.a,b.m,r.a],null,null)],(function(n,l){n(l,1,0)}),null)}var M=t.xb("app-search-ride",p,x,{},{},[]),O=e("s7LF");class P{}var _=t.yb(u,[],(function(n){return t.Kb([t.Lb(512,t.m,t.jb,[[8,[o.a,M]],[3,t.m],t.D]),t.Lb(4608,a.k,a.j,[t.z,[2,a.t]]),t.Lb(4608,O.l,O.l,[]),t.Lb(4608,r.b,r.b,[t.F,t.g]),t.Lb(4608,r.Gb,r.Gb,[r.b,t.m,t.w]),t.Lb(4608,r.Kb,r.Kb,[r.b,t.m,t.w]),t.Lb(1073742336,a.b,a.b,[]),t.Lb(1073742336,O.k,O.k,[]),t.Lb(1073742336,O.d,O.d,[]),t.Lb(1073742336,r.Eb,r.Eb,[]),t.Lb(1073742336,b.o,b.o,[[2,b.t],[2,b.m]]),t.Lb(1073742336,P,P,[]),t.Lb(1073742336,u,u,[]),t.Lb(1024,b.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);